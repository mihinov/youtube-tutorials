import{B as K,C as Q,Da as h,Ea as f,Fa as oe,Ga as re,Ha as q,I as V,Ia as w,Ja as E,K as N,Ka as g,La as p,M as W,Ma as s,Na as D,Oa as k,P as X,Pa as ae,Q as l,Qa as _,Ra as c,Sa as j,Ta as b,Ua as pe,Va as P,Wa as se,Xa as ce,da as Y,fb as me,gb as le,i as T,k as z,ka as F,kb as de,l as C,la as o,lb as ue,n as H,na as Z,p as u,pa as ee,qa as te,ra as ne,u as A,ua as a,v as R,va as ie,w as U,y as J}from"./chunk-6QERWLXC.js";var v=class n{constructor(t){this._http=t}_searchTrigger$$=new T(null);_loading$$=new T(!1);_cache=new Map;triggerSearch(t){this._searchTrigger$$.next({query:t.query,sort:t.sort??"stars",order:t.order??"desc"})}getRepos(){let t=this._searchTrigger$$.pipe(R(i=>!i||!i.query),N(()=>this._loading$$.next(!1)),u(()=>[])),e=this._searchTrigger$$.pipe(R(i=>!!i&&!!i.query),V(i=>{let m=JSON.stringify(i);return this._cache.has(m)?(this._loading$$.next(!1),C(this._cache.get(m))):this._searchTrigger$$.pipe(R(r=>!!r&&!!r.query),N(()=>this._loading$$.next(!0)),J(2500),K((r,S)=>r.query===S.query&&r.sort===S.sort&&r.order===S.order),V(r=>{let S=new de().set("q",`${r.query} in:name`).set("sort",r.sort??"stars").set("order",r.order??"desc");return this._http.get("https://api.github.com/search/repositories",{params:S}).pipe(u(L=>(this._cache.set(m,L.items),L.items)),U(()=>C([])),Q(()=>this._loading$$.next(!1)))}))}));return A(t,e)}getLoadingStatus(){return this._loading$$.asObservable()}static \u0275fac=function(e){return new(e||n)(X(ue))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})};function fe(n,t){if(n&1&&(p(0,"p",5),c(1),s()),n&2){let e=_();o(),j(e.repo.description)}}function ge(n,t){if(n&1&&(p(0,"span"),c(1),s()),n&2){let e=_();o(),j(e.repo.language)}}function _e(n,t){if(n&1&&(p(0,"span"),c(1),s()),n&2){let e=_();o(),b("\u{1F4C4} ",e.repo.license.name)}}var M=class n{repo;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=a({type:n,selectors:[["app-github-repo"]],inputs:{repo:"repo"},decls:18,vars:14,consts:[[1,"repo-card"],[1,"repo-card-wrapper"],[1,"repo-header"],[1,"owner-avatar",3,"src","alt"],["target","_blank","rel","noopener noreferrer",1,"repo-name",3,"href"],[1,"repo-description"],[1,"repo-stats"]],template:function(e,i){e&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),D(3,"img",3),p(4,"div")(5,"a",4),c(6),s(),h(7,fe,2,1,"p",5),s()(),p(8,"div",6),h(9,ge,2,1,"span"),p(10,"span"),c(11),s(),p(12,"span"),c(13),s(),p(14,"span"),c(15),P(16,"date"),s(),h(17,_e,2,1,"span"),s()()()),e&2&&(o(3),k("alt",pe(i.repo.owner.login))("src",i.repo.owner.avatar_url,F),o(2),k("href",i.repo.html_url,F),o(),b(" ",i.repo.full_name," "),o(),f(i.repo.description?7:-1),o(2),f(i.repo.language?9:-1),o(2),b("\u2B50 ",i.repo.stargazers_count),o(2),b("\u{1F374} ",i.repo.forks_count),o(2),b("\u{1F552} ",ce(16,11,i.repo.updated_at,"mediumDate")),o(2),f(i.repo.license?17:-1))},dependencies:[le],styles:[".repo-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1rem;border:1px solid var(--color-border);border-radius:.75rem;background:var(--color-bg);transition:box-shadow .2s,background .2s,border .2s}.repo-card-wrapper[_ngcontent-%COMP%]{overflow:hidden}.repo-card[_ngcontent-%COMP%]:hover{box-shadow:0 2px 8px var(--color-card-shadow)}.repo-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.75rem}.owner-avatar[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%}.repo-name[_ngcontent-%COMP%]{font-weight:600;font-size:1.1rem;color:var(--color-link);text-decoration:none}.repo-name[_ngcontent-%COMP%]:hover{text-decoration:underline}.repo-description[_ngcontent-%COMP%]{margin:.25rem 0 0;color:var(--color-muted);font-size:.9rem}.repo-stats[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;margin-top:.75rem;font-size:.85rem;color:var(--color-muted)}"],changeDetection:0})};var x=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=a({type:n,selectors:[["app-spinner"]],decls:1,vars:0,consts:[[1,"spinner"]],template:function(e,i){e&1&&D(0,"div",0)},styles:['.spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:50px;width:50px;margin:20px auto;position:relative}.spinner[_ngcontent-%COMP%]:after{content:"";width:40px;height:40px;border:4px solid var(--spinner-bg);border-top:4px solid var(--spinner-color);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}'],changeDetection:0})};var O=class n{_subscription;_structuralSpinnerRef;_attributeSpinnerRef;_contentView;_isSpinnerShown=!1;_vcr=l(ne);_tpl=l(Z,{optional:!0});_el=l(Y,{optional:!0});_renderer=l(ee);set loading(t){this._clearSub();let e=this._toObservable(t);this._subscription=e.subscribe(i=>{this._tpl?this._updateStructuralView(i):this._updateAttributeView(i)})}_toObservable(t){return H(t)?t.pipe(u(e=>!!e)):t instanceof Promise?z(t).pipe(u(e=>!!e)):C(!!t)}_updateStructuralView(t){if(!this._structuralSpinnerRef){this._structuralSpinnerRef=this._vcr.createComponent(x);let e=this._vcr.indexOf(this._structuralSpinnerRef.hostView);e>-1&&this._vcr.detach(e)}this._contentView||(this._contentView=this._tpl.createEmbeddedView({}),this._vcr.insert(this._contentView)),t&&!this._isSpinnerShown?(this._vcr.detach(this._vcr.indexOf(this._contentView)),this._vcr.insert(this._structuralSpinnerRef.hostView),this._isSpinnerShown=!0):!t&&this._isSpinnerShown&&(this._vcr.detach(this._vcr.indexOf(this._structuralSpinnerRef.hostView)),this._vcr.insert(this._contentView),this._isSpinnerShown=!1)}_updateAttributeView(t){this._el&&(t?(this._renderer.setStyle(this._el.nativeElement,"display","none"),this._attributeSpinnerRef||(this._attributeSpinnerRef=this._vcr.createComponent(x))):(this._renderer.removeStyle(this._el.nativeElement,"display"),this._attributeSpinnerRef?.destroy(),this._attributeSpinnerRef=void 0))}_clearSub(){this._subscription?.unsubscribe(),this._subscription=void 0}ngOnDestroy(){this._clearSub(),this._structuralSpinnerRef?.destroy(),this._structuralSpinnerRef=void 0,this._attributeSpinnerRef?.destroy(),this._attributeSpinnerRef=void 0,this._contentView?.destroy(),this._contentView=void 0,this._el&&this._renderer.removeStyle(this._el.nativeElement,"display")}static \u0275fac=function(e){return new(e||n)};static \u0275dir=ie({type:n,selectors:[["","loading",""]],inputs:{loading:"loading"}})};var be=(n,t)=>t.id;function ve(n,t){if(n&1&&g(0,"app-github-repo",1),n&2){let e=t.$implicit;q("repo",e)}}function Se(n,t){if(n&1&&(w(0,"div",0),oe(1,ve,1,1,"app-github-repo",1,be),E()),n&2){let e=_();q("loading",e.reposLoading$),o(),re(t)}}var $=class n{_githubSearchService=l(v);repos$=this._githubSearchService.getRepos();reposLoading$=this._githubSearchService.getLoadingStatus();static \u0275fac=function(e){return new(e||n)};static \u0275cmp=a({type:n,selectors:[["app-github-repos"]],decls:2,vars:3,consts:[[1,"repos-wrapper",3,"loading"],[3,"repo"]],template:function(e,i){if(e&1&&(h(0,Se,3,1,"div",0),P(1,"async")),e&2){let m;f((m=se(1,1,i.repos$))?0:-1,m)}},dependencies:[M,O,me],styles:[".repos-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}"],changeDetection:0})};var I=class n{constructor(t){this._githubSearchService=t}triggerSearch(t){let i=t.target.value;this._githubSearchService.triggerSearch({query:i})}static \u0275fac=function(e){return new(e||n)(te(v))};static \u0275cmp=a({type:n,selectors:[["app-github-search"]],decls:1,vars:0,consts:[["name","search","type","text","placeholder","\u041D\u0430\u0439\u0442\u0438 \u0440\u0435\u043F\u043E\u0437\u0438\u0442\u043E\u0440\u0438\u0438","autofocus","",1,"text-input",3,"input"]],template:function(e,i){e&1&&(p(0,"input",0),ae("input",function(r){return i.triggerSearch(r)}),s())},styles:[".text-input[_ngcontent-%COMP%]{max-width:400px}"],changeDetection:0})};var G=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=a({type:n,selectors:[["app-github"]],decls:2,vars:0,template:function(e,i){e&1&&g(0,"app-github-search")(1,"app-github-repos")},dependencies:[$,I],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:1rem}"],changeDetection:0})};var B=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=a({type:n,selectors:[["app-page-main"]],decls:2,vars:0,consts:[[1,"container"]],template:function(e,i){e&1&&(w(0,"div",0),g(1,"app-github"),E())},dependencies:[G],encapsulation:2,changeDetection:0})};export{B as default};
