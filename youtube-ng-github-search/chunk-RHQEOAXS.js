import{B as J,Ca as l,Da as d,Ea as ne,Fa as ie,Ga as z,H as k,Ha as D,Ia as P,J as w,Ja as _,Ka as r,L as K,La as a,Ma as M,Na as y,O as Q,Oa as oe,P as m,Pa as u,Qa as s,Ra as j,Sa as b,Ta as re,Ua as O,Va as ae,Wa as pe,ca as W,eb as se,fb as ce,i as F,ja as C,jb as me,k as B,ka as o,kb as le,l as S,ma as X,n as L,oa as Y,p as g,pa as Z,qa as ee,ta as p,u as H,ua as te,v as E,w as U,y as A}from"./chunk-KNXIVRCM.js";var v=class n{constructor(t){this._http=t}_searchTrigger$$=new F(null);_loading$$=new F(!1);_cache=new Map;triggerSearch(t){this._searchTrigger$$.next({query:t.query,sort:t.sort??"stars",order:t.order??"desc"})}getRepos(){let t=this._searchTrigger$$.pipe(E(i=>!i||!i.query),w(()=>this._loading$$.next(!1)),g(()=>[])),e=this._searchTrigger$$.pipe(E(i=>!!i&&!!i.query),k(i=>{let c=JSON.stringify(i);return this._cache.has(c)?(this._loading$$.next(!1),S(this._cache.get(c))):this._searchTrigger$$.pipe(E(f=>!!f&&!!f.query),w(()=>this._loading$$.next(!0)),A(2500),k(f=>this._getRepos(f).pipe(w(N=>{this._cache.set(c,N)}),U(N=>(alert(N.message),S([]))),J(()=>this._loading$$.next(!1)))))}));return H(t,e)}_getRepos(t){let e=new me().set("q",`${t.query} in:name`).set("sort",t.sort??"stars").set("order",t.order??"desc");return this._http.get("https://api.github.com/search/repositories",{params:e}).pipe(g(i=>i.items))}getLoadingStatus(){return this._loading$$.asObservable()}static \u0275fac=function(e){return new(e||n)(Q(le))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};function ue(n,t){if(n&1&&(r(0,"p",6),s(1),a()),n&2){let e=u();o(),j(e.repo.description)}}function he(n,t){if(n&1&&(r(0,"span"),s(1),a()),n&2){let e=u();o(),j(e.repo.language)}}function fe(n,t){if(n&1&&(r(0,"span"),s(1),a()),n&2){let e=u();o(),b("\u{1F4C4} ",e.repo.license.name)}}function ge(n,t){if(n&1&&(r(0,"span"),s(1,"\u{1F310} "),r(2,"a",3),s(3," Github Pages "),a()()),n&2){let e=u();o(2),y("href",e.repo.homepage,C)}}var $=class n{repo;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=p({type:n,selectors:[["app-github-repo"]],inputs:{repo:"repo"},decls:20,vars:16,consts:[[1,"repo-card"],[1,"repo-card-wrapper"],[1,"repo-header"],["target","_blank","rel","noopener noreferrer",3,"href"],[1,"owner-avatar",3,"src","alt"],["target","_blank","rel","noopener noreferrer",1,"repo-name",3,"href"],[1,"repo-description"],[1,"repo-stats"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),M(4,"img",4),a(),r(5,"div")(6,"a",5),s(7),a(),l(8,ue,2,1,"p",6),a()(),r(9,"div",7),l(10,he,2,1,"span"),r(11,"span"),s(12),a(),r(13,"span"),s(14),a(),r(15,"span"),s(16),O(17,"date"),a(),l(18,fe,2,1,"span"),l(19,ge,4,1,"span"),a()()()),e&2&&(o(3),y("href",i.repo.owner.html_url,C),o(),y("alt",re(i.repo.owner.login))("src",i.repo.owner.avatar_url,C),o(2),y("href",i.repo.html_url,C),o(),b(" ",i.repo.full_name," "),o(),d(i.repo.description?8:-1),o(2),d(i.repo.language?10:-1),o(2),b("\u2B50 ",i.repo.stargazers_count),o(2),b("\u{1F500} ",i.repo.forks_count),o(2),b("\u{1F552} ",pe(17,13,i.repo.updated_at,"mediumDate")),o(2),d(i.repo.license?18:-1),o(),d(i.repo.homepage?19:-1))},dependencies:[ce],styles:[".repo-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1rem;border:1px solid var(--color-border);border-radius:.75rem;background-color:var(--color-bg);transition:background-color .2s,border .2s}.repo-card-wrapper[_ngcontent-%COMP%]{overflow:hidden}.repo-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.75rem}.owner-avatar[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%}.repo-name[_ngcontent-%COMP%]{font-weight:600;font-size:1.1rem;color:var(--color-link);text-decoration:none}.repo-name[_ngcontent-%COMP%]:hover{text-decoration:underline}.repo-description[_ngcontent-%COMP%]{margin:.25rem 0 0;color:var(--color-muted);font-size:.9rem}.repo-stats[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;gap:1rem;margin-top:.75rem;font-size:.85rem;color:var(--color-muted)}"],changeDetection:0})};var R=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=p({type:n,selectors:[["app-spinner"]],decls:1,vars:0,consts:[[1,"spinner"]],template:function(e,i){e&1&&M(0,"div",0)},styles:['.spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:50px;width:50px;margin:20px auto;position:relative}.spinner[_ngcontent-%COMP%]:after{content:"";width:40px;height:40px;border:4px solid var(--spinner-bg);border-top:4px solid var(--spinner-color);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}'],changeDetection:0})};var I=class n{_subscription;_structuralSpinnerRef;_attributeSpinnerRef;_contentView;_isSpinnerShown=!1;_vcr=m(ee);_tpl=m(X,{optional:!0});_el=m(W,{optional:!0});_renderer=m(Y);set loading(t){this._clearSub();let e=this._toObservable(t);this._subscription=e.subscribe(i=>{this._tpl?this._updateStructuralView(i):this._updateAttributeView(i)})}_toObservable(t){return L(t)?t.pipe(g(e=>!!e)):t instanceof Promise?B(t).pipe(g(e=>!!e)):S(!!t)}_updateStructuralView(t){if(!this._structuralSpinnerRef){this._structuralSpinnerRef=this._vcr.createComponent(R);let e=this._vcr.indexOf(this._structuralSpinnerRef.hostView);e>-1&&this._vcr.detach(e)}this._contentView||(this._contentView=this._tpl.createEmbeddedView({}),this._vcr.insert(this._contentView)),t&&!this._isSpinnerShown?(this._vcr.detach(this._vcr.indexOf(this._contentView)),this._vcr.insert(this._structuralSpinnerRef.hostView),this._isSpinnerShown=!0):!t&&this._isSpinnerShown&&(this._vcr.detach(this._vcr.indexOf(this._structuralSpinnerRef.hostView)),this._vcr.insert(this._contentView),this._isSpinnerShown=!1)}_updateAttributeView(t){this._el&&(t?(this._renderer.setStyle(this._el.nativeElement,"display","none"),this._attributeSpinnerRef||(this._attributeSpinnerRef=this._vcr.createComponent(R))):(this._renderer.removeStyle(this._el.nativeElement,"display"),this._attributeSpinnerRef?.destroy(),this._attributeSpinnerRef=void 0))}_clearSub(){this._subscription?.unsubscribe(),this._subscription=void 0}ngOnDestroy(){this._clearSub(),this._structuralSpinnerRef?.destroy(),this._structuralSpinnerRef=void 0,this._attributeSpinnerRef?.destroy(),this._attributeSpinnerRef=void 0,this._contentView?.destroy(),this._contentView=void 0,this._el&&this._renderer.removeStyle(this._el.nativeElement,"display")}static \u0275fac=function(e){return new(e||n)};static \u0275dir=te({type:n,selectors:[["","loading",""]],inputs:{loading:"loading"}})};var _e=(n,t)=>t.id;function be(n,t){if(n&1&&_(0,"app-github-repo",1),n&2){let e=t.$implicit;z("repo",e)}}function ve(n,t){if(n&1&&(D(0,"div",0),ne(1,be,1,1,"app-github-repo",1,_e),P()),n&2){let e=u();z("loading",e.reposLoading$),o(),ie(t)}}var G=class n{_githubSearchService=m(v);repos$=this._githubSearchService.getRepos();reposLoading$=this._githubSearchService.getLoadingStatus();static \u0275fac=function(e){return new(e||n)};static \u0275cmp=p({type:n,selectors:[["app-github-repos"]],decls:2,vars:3,consts:[[1,"repos-wrapper",3,"loading"],[3,"repo"]],template:function(e,i){if(e&1&&(l(0,ve,3,1,"div",0),O(1,"async")),e&2){let c;d((c=ae(1,1,i.repos$))?0:-1,c)}},dependencies:[$,I,se],styles:[".repos-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}"],changeDetection:0})};var T=class n{constructor(t){this._githubSearchService=t}triggerSearch(t){let i=t.target.value;this._githubSearchService.triggerSearch({query:i})}static \u0275fac=function(e){return new(e||n)(Z(v))};static \u0275cmp=p({type:n,selectors:[["app-github-search"]],decls:1,vars:0,consts:[["name","search","type","text","placeholder","\u041D\u0430\u0439\u0442\u0438 \u0440\u0435\u043F\u043E\u0437\u0438\u0442\u043E\u0440\u0438\u0438","autofocus","",1,"text-input",3,"input"]],template:function(e,i){e&1&&(r(0,"input",0),oe("input",function(f){return i.triggerSearch(f)}),a())},styles:[".text-input[_ngcontent-%COMP%]{max-width:400px}"],changeDetection:0})};var V=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=p({type:n,selectors:[["app-github"]],decls:2,vars:0,template:function(e,i){e&1&&_(0,"app-github-search")(1,"app-github-repos")},dependencies:[G,T],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:1rem}"],changeDetection:0})};var q=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=p({type:n,selectors:[["app-page-main"]],decls:2,vars:0,consts:[[1,"container"]],template:function(e,i){e&1&&(D(0,"div",0),_(1,"app-github"),P())},dependencies:[V],encapsulation:2,changeDetection:0})};export{q as default};
