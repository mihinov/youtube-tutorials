import{A as H,Ba as l,Ca as d,Da as Z,Ea as ee,Fa as N,G as T,Ga as R,Ha as w,I as V,Ia as g,Ja as r,K as U,Ka as a,La as E,Ma as C,N as A,Na as te,O as m,Oa as u,Pa as s,Qa as F,Ra as _,Sa as ne,Ta as D,Ua as ie,Va as oe,ba as J,db as re,eb as ae,i as $,ia as S,ib as pe,ja as o,jb as se,k as z,l as f,la as Q,n as L,na as K,oa as W,p as v,pa as X,sa as p,ta as Y,u as j,v as B,x as q}from"./chunk-WZK5QGAW.js";var b=class n{constructor(t){this._http=t}_searchTrigger$$=new $(null);_loading$$=new $(!1);_cache=new Map;triggerSearch(t){let e=t.query?.trim().replace(/\s+/g," ").toLowerCase()??"";this._searchTrigger$$.next({query:e,sort:t.sort??"stars",order:t.order??"desc"})}getRepos(){return this._searchTrigger$$.pipe(T(t=>{if(t===null||t.query==="")return this._loading$$.next(!1),f([]);let e=JSON.stringify(t);return this._cache.has(e)?(this._loading$$.next(!1),f(this._cache.get(e))):this._searchTrigger$$.pipe(j(i=>!!i&&!!i.query),V(()=>this._loading$$.next(!0)),q(2500),T(i=>this._getRepos(i).pipe(V(c=>{this._cache.set(e,c)}),B(c=>(alert(c.message),f([]))),H(()=>this._loading$$.next(!1)))))}))}_getRepos(t){let e=new pe().set("q",`${t.query} in:name,description`).set("sort",t.sort).set("order",t.order);return this._http.get("https://api.github.com/search/repositories",{params:e}).pipe(v(i=>i.items))}getLoadingStatus(){return this._loading$$.asObservable()}static \u0275fac=function(e){return new(e||n)(A(se))};static \u0275prov=U({token:n,factory:n.\u0275fac,providedIn:"root"})};function le(n,t){if(n&1&&(r(0,"p",6),s(1),a()),n&2){let e=u();o(),F(e.repo.description)}}function de(n,t){if(n&1&&(r(0,"span"),s(1),a()),n&2){let e=u();o(),F(e.repo.language)}}function ue(n,t){if(n&1&&(r(0,"span"),s(1),a()),n&2){let e=u();o(),_("\u{1F4C4} ",e.repo.license.name)}}function he(n,t){if(n&1&&(r(0,"span"),s(1,"\u{1F310} "),r(2,"a",3),s(3," Github Pages "),a()()),n&2){let e=u();o(2),C("href",e.repo.homepage,S)}}var P=class n{repo;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=p({type:n,selectors:[["app-github-repo"]],inputs:{repo:"repo"},decls:20,vars:16,consts:[[1,"repo-card"],[1,"repo-card-wrapper"],[1,"repo-header"],["target","_blank","rel","noopener noreferrer",3,"href"],[1,"owner-avatar",3,"src","alt"],["target","_blank","rel","noopener noreferrer",1,"repo-name",3,"href"],[1,"repo-description"],[1,"repo-stats"]],template:function(e,i){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),E(4,"img",4),a(),r(5,"div")(6,"a",5),s(7),a(),l(8,le,2,1,"p",6),a()(),r(9,"div",7),l(10,de,2,1,"span"),r(11,"span"),s(12),a(),r(13,"span"),s(14),a(),r(15,"span"),s(16),D(17,"date"),a(),l(18,ue,2,1,"span"),l(19,he,4,1,"span"),a()()()),e&2&&(o(3),C("href",i.repo.owner.html_url,S),o(),C("alt",ne(i.repo.owner.login))("src",i.repo.owner.avatar_url,S),o(2),C("href",i.repo.html_url,S),o(),_(" ",i.repo.full_name," "),o(),d(i.repo.description?8:-1),o(2),d(i.repo.language?10:-1),o(2),_("\u2B50 ",i.repo.stargazers_count),o(2),_("\u{1F500} ",i.repo.forks_count),o(2),_("\u{1F552} ",oe(17,13,i.repo.updated_at,"mediumDate")),o(2),d(i.repo.license?18:-1),o(),d(i.repo.homepage?19:-1))},dependencies:[ae],styles:[".repo-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1rem;border:1px solid var(--color-border);border-radius:.75rem;background-color:var(--color-bg);transition:background-color .2s,border .2s}.repo-card-wrapper[_ngcontent-%COMP%]{overflow:hidden}.repo-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.75rem}.owner-avatar[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%}.repo-name[_ngcontent-%COMP%]{font-weight:600;font-size:1.1rem;color:var(--color-link);text-decoration:none}.repo-name[_ngcontent-%COMP%]:hover{text-decoration:underline}.repo-description[_ngcontent-%COMP%]{margin:.25rem 0 0;color:var(--color-muted);font-size:.9rem}.repo-stats[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;gap:1rem;margin-top:.75rem;font-size:.85rem;color:var(--color-muted)}"],changeDetection:0})};var x=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=p({type:n,selectors:[["app-spinner"]],decls:1,vars:0,consts:[[1,"spinner"]],template:function(e,i){e&1&&E(0,"div",0)},styles:['.spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:50px;width:50px;margin:20px auto;position:relative}.spinner[_ngcontent-%COMP%]:after{content:"";width:40px;height:40px;border:4px solid var(--spinner-bg);border-top:4px solid var(--spinner-color);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}'],changeDetection:0})};var M=class n{_subscription;_structuralSpinnerRef;_attributeSpinnerRef;_contentView;_isSpinnerShown=!1;_vcr=m(X);_tpl=m(Q,{optional:!0});_el=m(J,{optional:!0});_renderer=m(K);set loading(t){this._clearSub();let e=this._toObservable(t);this._subscription=e.subscribe(i=>{this._tpl?this._updateStructuralView(i):this._updateAttributeView(i)})}_toObservable(t){return L(t)?t.pipe(v(e=>!!e)):t instanceof Promise?z(t).pipe(v(e=>!!e)):f(!!t)}_updateStructuralView(t){if(!this._structuralSpinnerRef){this._structuralSpinnerRef=this._vcr.createComponent(x);let e=this._vcr.indexOf(this._structuralSpinnerRef.hostView);e>-1&&this._vcr.detach(e)}this._contentView||(this._contentView=this._tpl.createEmbeddedView({}),this._vcr.insert(this._contentView)),t&&!this._isSpinnerShown?(this._vcr.detach(this._vcr.indexOf(this._contentView)),this._vcr.insert(this._structuralSpinnerRef.hostView),this._isSpinnerShown=!0):!t&&this._isSpinnerShown&&(this._vcr.detach(this._vcr.indexOf(this._structuralSpinnerRef.hostView)),this._vcr.insert(this._contentView),this._isSpinnerShown=!1)}_updateAttributeView(t){this._el&&(t?(this._renderer.setStyle(this._el.nativeElement,"display","none"),this._attributeSpinnerRef||(this._attributeSpinnerRef=this._vcr.createComponent(x))):(this._renderer.removeStyle(this._el.nativeElement,"display"),this._attributeSpinnerRef?.destroy(),this._attributeSpinnerRef=void 0))}_clearSub(){this._subscription?.unsubscribe(),this._subscription=void 0}ngOnDestroy(){this._clearSub(),this._structuralSpinnerRef?.destroy(),this._structuralSpinnerRef=void 0,this._attributeSpinnerRef?.destroy(),this._attributeSpinnerRef=void 0,this._contentView?.destroy(),this._contentView=void 0,this._el&&this._renderer.removeStyle(this._el.nativeElement,"display")}static \u0275fac=function(e){return new(e||n)};static \u0275dir=Y({type:n,selectors:[["","loading",""]],inputs:{loading:"loading"}})};var fe=(n,t)=>t.id;function ge(n,t){if(n&1&&g(0,"app-github-repo",1),n&2){let e=t.$implicit;N("repo",e)}}function _e(n,t){if(n&1&&(R(0,"div",0),Z(1,ge,1,1,"app-github-repo",1,fe),w()),n&2){let e=u();N("loading",e.reposLoading$),o(),ee(t)}}var O=class n{_githubSearchService=m(b);repos$=this._githubSearchService.getRepos();reposLoading$=this._githubSearchService.getLoadingStatus();static \u0275fac=function(e){return new(e||n)};static \u0275cmp=p({type:n,selectors:[["app-github-repos"]],decls:2,vars:3,consts:[[1,"repos-wrapper",3,"loading"],[3,"repo"]],template:function(e,i){if(e&1&&(l(0,_e,3,1,"div",0),D(1,"async")),e&2){let c;d((c=ie(1,1,i.repos$))?0:-1,c)}},dependencies:[P,M,re],styles:[".repos-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}"],changeDetection:0})};var I=class n{constructor(t){this._githubSearchService=t}triggerSearch(t){let i=t.target.value;this._githubSearchService.triggerSearch({query:i})}static \u0275fac=function(e){return new(e||n)(W(b))};static \u0275cmp=p({type:n,selectors:[["app-github-search"]],decls:1,vars:0,consts:[["name","search","type","text","placeholder","\u041D\u0430\u0439\u0442\u0438 \u0440\u0435\u043F\u043E\u0437\u0438\u0442\u043E\u0440\u0438\u0438","autofocus","",1,"text-input",3,"input"]],template:function(e,i){e&1&&(r(0,"input",0),te("input",function(ce){return i.triggerSearch(ce)}),a())},styles:[".text-input[_ngcontent-%COMP%]{max-width:400px}"],changeDetection:0})};var G=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=p({type:n,selectors:[["app-github"]],decls:2,vars:0,template:function(e,i){e&1&&g(0,"app-github-search")(1,"app-github-repos")},dependencies:[O,I],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:1rem}"],changeDetection:0})};var k=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=p({type:n,selectors:[["app-page-main"]],decls:2,vars:0,consts:[[1,"container"]],template:function(e,i){e&1&&(R(0,"div",0),g(1,"app-github"),w())},dependencies:[G],encapsulation:2,changeDetection:0})};export{k as default};
