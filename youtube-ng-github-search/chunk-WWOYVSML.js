import{A as L,Ba as l,Ca as d,Da as W,Ea as X,Fa as T,G,Ga as y,Ha as x,Ia as u,Ja as a,K as z,Ka as p,La as w,Ma as V,N as q,Na as Y,O as c,Oa as h,Pa as s,Qa as N,Ra as f,Sa as Z,Ta as R,Ua as ee,Va as te,ba as H,db as ne,eb as ie,i as I,ia as $,ib as oe,ja as o,jb as re,k as j,l as C,la as A,n as k,na as U,oa as J,p as _,pa as K,sa as r,ta as Q,x as B}from"./chunk-5LNZUGKZ.js";var g=class n{constructor(t){this._http=t}_searchTrigger$$=new I(null);_loading$$=new I(!1);triggerSearch(t){this._searchTrigger$$.next({query:t.query,sort:t.sort??"stars",order:t.order??"desc"})}getRepos(){return this._searchTrigger$$.pipe(G(t=>!t||!t.query?(this._loading$$.next(!1),C([])):(this._loading$$.next(!0),this._searchTrigger$$.pipe(B(2500),G(e=>{e=e;let i=new oe().set("q",`${e.query} in:name`).set("sort",e.sort??"stars").set("order",e.order??"desc");return this._http.get("https://api.github.com/search/repositories",{params:i}).pipe(_(b=>b.items),L(()=>this._loading$$.next(!1)))})))))}getLoadingStatus(){return this._loading$$.asObservable()}static \u0275fac=function(e){return new(e||n)(q(re))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};function se(n,t){if(n&1&&(a(0,"p",5),s(1),p()),n&2){let e=h();o(),N(e.repo.description)}}function ce(n,t){if(n&1&&(a(0,"span"),s(1),p()),n&2){let e=h();o(),N(e.repo.language)}}function me(n,t){if(n&1&&(a(0,"span"),s(1),p()),n&2){let e=h();o(),f("\u{1F4C4} ",e.repo.license.name)}}var D=class n{repo;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=r({type:n,selectors:[["app-github-repo"]],inputs:{repo:"repo"},decls:18,vars:14,consts:[[1,"repo-card"],[1,"repo-card-wrapper"],[1,"repo-header"],[1,"owner-avatar",3,"src","alt"],["target","_blank","rel","noopener noreferrer",1,"repo-name",3,"href"],[1,"repo-description"],[1,"repo-stats"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2),w(3,"img",3),a(4,"div")(5,"a",4),s(6),p(),l(7,se,2,1,"p",5),p()(),a(8,"div",6),l(9,ce,2,1,"span"),a(10,"span"),s(11),p(),a(12,"span"),s(13),p(),a(14,"span"),s(15),R(16,"date"),p(),l(17,me,2,1,"span"),p()()()),e&2&&(o(3),V("alt",Z(i.repo.owner.login))("src",i.repo.owner.avatar_url,$),o(2),V("href",i.repo.html_url,$),o(),f(" ",i.repo.full_name," "),o(),d(i.repo.description?7:-1),o(2),d(i.repo.language?9:-1),o(2),f("\u2B50 ",i.repo.stargazers_count),o(2),f("\u{1F374} ",i.repo.forks_count),o(2),f("\u{1F552} ",te(16,11,i.repo.updated_at,"mediumDate")),o(2),d(i.repo.license?17:-1))},dependencies:[ie],styles:[".repo-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1rem;border:1px solid var(--color-border);border-radius:.75rem;background:var(--color-bg);transition:box-shadow .2s,background .2s,border .2s}.repo-card-wrapper[_ngcontent-%COMP%]{overflow:hidden}.repo-card[_ngcontent-%COMP%]:hover{box-shadow:0 2px 8px var(--color-card-shadow)}.repo-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.75rem}.owner-avatar[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%}.repo-name[_ngcontent-%COMP%]{font-weight:600;font-size:1.1rem;color:var(--color-link);text-decoration:none}.repo-name[_ngcontent-%COMP%]:hover{text-decoration:underline}.repo-description[_ngcontent-%COMP%]{margin:.25rem 0 0;color:var(--color-muted);font-size:.9rem}.repo-stats[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;margin-top:.75rem;font-size:.85rem;color:var(--color-muted)}"],changeDetection:0})};var S=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=r({type:n,selectors:[["app-spinner"]],decls:1,vars:0,consts:[[1,"spinner"]],template:function(e,i){e&1&&w(0,"div",0)},styles:['.spinner[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:50px;width:50px;margin:20px auto;position:relative}.spinner[_ngcontent-%COMP%]:after{content:"";width:40px;height:40px;border:4px solid var(--spinner-bg);border-top:4px solid var(--spinner-color);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}'],changeDetection:0})};var E=class n{_subscription;_structuralSpinnerRef;_attributeSpinnerRef;_contentView;_isSpinnerShown=!1;_vcr=c(K);_tpl=c(A,{optional:!0});_el=c(H,{optional:!0});_renderer=c(U);set loading(t){this._clearSub();let e=this._toObservable(t);this._subscription=e.subscribe(i=>{this._tpl?this._updateStructuralView(i):this._updateAttributeView(i)})}_toObservable(t){return k(t)?t.pipe(_(e=>!!e)):t instanceof Promise?j(t).pipe(_(e=>!!e)):C(!!t)}_updateStructuralView(t){if(!this._structuralSpinnerRef){this._structuralSpinnerRef=this._vcr.createComponent(S);let e=this._vcr.indexOf(this._structuralSpinnerRef.hostView);e>-1&&this._vcr.detach(e)}this._contentView||(this._contentView=this._tpl.createEmbeddedView({}),this._vcr.insert(this._contentView)),t&&!this._isSpinnerShown?(this._vcr.detach(this._vcr.indexOf(this._contentView)),this._vcr.insert(this._structuralSpinnerRef.hostView),this._isSpinnerShown=!0):!t&&this._isSpinnerShown&&(this._vcr.detach(this._vcr.indexOf(this._structuralSpinnerRef.hostView)),this._vcr.insert(this._contentView),this._isSpinnerShown=!1)}_updateAttributeView(t){this._el&&(t?(this._renderer.setStyle(this._el.nativeElement,"display","none"),this._attributeSpinnerRef||(this._attributeSpinnerRef=this._vcr.createComponent(S))):(this._renderer.removeStyle(this._el.nativeElement,"display"),this._attributeSpinnerRef?.destroy(),this._attributeSpinnerRef=void 0))}_clearSub(){this._subscription?.unsubscribe(),this._subscription=void 0}ngOnDestroy(){this._clearSub(),this._structuralSpinnerRef?.destroy(),this._structuralSpinnerRef=void 0,this._attributeSpinnerRef?.destroy(),this._attributeSpinnerRef=void 0,this._contentView?.destroy(),this._contentView=void 0,this._el&&this._renderer.removeStyle(this._el.nativeElement,"display")}static \u0275fac=function(e){return new(e||n)};static \u0275dir=Q({type:n,selectors:[["","loading",""]],inputs:{loading:"loading"}})};var le=(n,t)=>t.id;function de(n,t){if(n&1&&u(0,"app-github-repo",1),n&2){let e=t.$implicit;T("repo",e)}}function ue(n,t){if(n&1&&(y(0,"div",0),W(1,de,1,1,"app-github-repo",1,le),x()),n&2){let e=h();T("loading",e.reposLoading$),o(),X(t)}}var P=class n{_githubSearchService=c(g);repos$=this._githubSearchService.getRepos();reposLoading$=this._githubSearchService.getLoadingStatus();static \u0275fac=function(e){return new(e||n)};static \u0275cmp=r({type:n,selectors:[["app-github-repos"]],decls:2,vars:3,consts:[[1,"repos-wrapper",3,"loading"],[3,"repo"]],template:function(e,i){if(e&1&&(l(0,ue,3,1,"div",0),R(1,"async")),e&2){let b;d((b=ee(1,1,i.repos$))?0:-1,b)}},dependencies:[D,E,ne],styles:[".repos-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}"],changeDetection:0})};var M=class n{constructor(t){this._githubSearchService=t}triggerSearch(t){let i=t.target.value;this._githubSearchService.triggerSearch({query:i})}static \u0275fac=function(e){return new(e||n)(J(g))};static \u0275cmp=r({type:n,selectors:[["app-github-search"]],decls:1,vars:0,consts:[["name","search","type","text","placeholder","\u041D\u0430\u0439\u0442\u0438 \u0440\u0435\u043F\u043E\u0437\u0438\u0442\u043E\u0440\u0438\u0438","autofocus","",1,"text-input",3,"input"]],template:function(e,i){e&1&&(a(0,"input",0),Y("input",function(ae){return i.triggerSearch(ae)}),p())},styles:[".text-input[_ngcontent-%COMP%]{max-width:400px}"],changeDetection:0})};var O=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=r({type:n,selectors:[["app-github"]],decls:2,vars:0,template:function(e,i){e&1&&u(0,"app-github-search")(1,"app-github-repos")},dependencies:[P,M],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:1rem}"],changeDetection:0})};var F=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=r({type:n,selectors:[["app-page-main"]],decls:2,vars:0,consts:[[1,"container"]],template:function(e,i){e&1&&(y(0,"div",0),u(1,"app-github"),x())},dependencies:[O],encapsulation:2,changeDetection:0})};export{F as default};
