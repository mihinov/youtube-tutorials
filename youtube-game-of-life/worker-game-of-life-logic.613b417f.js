class GameLifeLogic{#e=0;#t=!1;get activeCells(){return this.#e}#s=new Map;get field(){return this.#s}#i=new Map;get buffer(){return this.#i}#l=10;#r=10;get rows(){return this.#l}get cols(){return this.#r}constructor(){}#f(e){this.#s=new Map,this.#i=new Map,this.#e=0;for(let t=0;t<this.#l;t++)for(let s=0;s<this.#r;s++){let i=this.#h(t,s),l=1===Math.round(Math.random()),r=!0===e&&l;!0===r&&this.#e++,this.#s.set(i,r)}}initFields(e,t,s){return this.#l=t,this.#r=s,this.#t=e,this.#f(e),{cols:this.cols,rows:this.rows,activeCells:this.activeCells,field:this.field,buffer:this.buffer}}#h(e,t){return`${e}-${t}`}#o(e,t){let s=0;for(let i=-1;i<=1;i++)for(let l=-1;l<=1;l++){if(0===i&&0===l)continue;let r=(e+i+this.#l)%this.#l,f=(t+l+this.#r)%this.#r,h=this.#h(r,f);this.#s.get(h)&&s++}return s}#a(){this.#e=0,this.#i=new Map;for(let e=0;e<this.#l;e++)for(let t=0;t<this.#r;t++){let s=this.#o(e,t),i=this.#h(e,t);this.#s.get(i)?s<2||s>3?this.#i.set(i,!1):(this.#e++,this.#i.set(i,!0)):3===s?(this.#e++,this.#i.set(i,!0)):this.#i.set(i,!1)}[this.#s,this.#i]=[this.#i,this.#s]}updateField(){return this.#a(),{cols:this.cols,rows:this.rows,activeCells:this.activeCells,field:this.field,buffer:this.buffer}}deleteOrCreateCell(e,t){"delete"===e?(this.#e--,this.#s.set(t,!1)):"create"===e&&(this.#e++,this.#s.set(t,!0))}#d(e,t,s){if(e===this.#l&&t===this.#r)return;let i=this.#s,l=this.#l,r=this.#r;this.#t=s,this.#l=e,this.#r=t,this.#s=new Map,this.#i=new Map,this.#e=0;for(let s=0;s<e;s++)for(let e=0;e<t;e++){let t=this.#h(s,e),l=i.get(t)||!1;!0===l&&this.#e++,this.#s.set(t,l)}if(e>l||t>r)for(let s=0;s<e;s++)for(let e=0;e<t;e++){let t=this.#h(s,e);if(!i.has(t)){let e=1===Math.round(Math.random()),s=!0===this.#t&&e;!0===s&&this.#e++,this.#s.set(t,s)}}if(e<l||t<r){for(let s=0;s<e;s++)for(let e=0;e<t;e++){let t=this.#h(s,e),l=!!i.get(t);!0===l&&this.#e++,this.#i.set(t,l)}this.#s=this.#i,this.#i=i}}resizeField(e,t,s){return this.#d(e,t,s),{cols:this.cols,rows:this.rows,activeCells:this.activeCells,field:this.field,buffer:this.buffer}}}let gameOfLife=new GameLifeLogic;onmessage=function(e){let t=e.data,s=t.type,i=t.payload;"initFields"===s?postMessage({type:"result: initFields",data:gameOfLife.initFields(i.random,i.rows,i.cols)}):"updateField"===s?postMessage({type:"result: updateField",data:gameOfLife.updateField()}):"deleteOrCreateCell"===s?postMessage({type:"result: deleteOrCreateCell",data:gameOfLife.deleteOrCreateCell(i.typeAction,i.key)}):"resizeField"===s&&postMessage({type:"result: resizeField",data:gameOfLife.resizeField(i.newRows,i.newCols,i.random)})};
//# sourceMappingURL=worker-game-of-life-logic.613b417f.js.map
