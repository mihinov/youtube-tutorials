{"mappings":"A,S,E,C,C,C,C,C,C,C,E,O,c,C,E,E,C,I,E,I,E,W,C,E,a,C,C,E,C,I,E,A,a,O,W,W,A,a,O,K,K,A,a,O,O,O,A,a,O,O,O,C,E,E,C,E,E,C,E,E,E,iB,CKAO,SAAS,EAAgB,CAAc,CAAE,EAAmB,CAAC,EAClE,IAAM,EAAM,CACV,GAAI,CACN,EACI,EAAQ,KAAK,GAAjB,GAEM,EAAU,KAChB,GAAI,AAAa,IAAb,EAAgB,CACnB,IACA,EAAI,EAAA,CAAK,sBAAsB,GAC/B,MACD,CAGE,IAAM,EAAM,KAAK,GAAjB,GACM,EAAQ,EAAM,EAEhB,GAAS,IACX,IACA,EAAQ,EAAO,EAAQ,GAGzB,EAAI,EAAA,CAAK,sBAAsB,EACjC,EAIA,OAFA,EAAI,EAAA,CAAK,sBAAsB,GAExB,CACT,CC5BO,SAAS,EAAmB,CAAuB,CAAE,CAAW,CAAE,CAAW,EACnF,IAAI,EAAQ,SAAS,EAAM,KAA3B,EAYA,OAVI,MAAM,GACT,EAAQ,EACE,EAAQ,EAClB,EAAQ,EACE,EAAQ,GAClB,CAAA,EAAQ,CADF,EAIP,EAAM,KAAA,CAAQ,EAAM,QAApB,GAEO,CACR,C,M,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,O,C,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,I,C,E,O,C,E,E,O,E,E,O,A,C,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,Q,C,S,C,C,C,E,C,C,E,C,C,E,E,iB,C,G,E,Q,C,Q,S,C,C,C,E,E,E,O,C,W,I,E,A,G,E,G,E,E,O,C,U,I,E,A,G,E,GLZA,IAcA,EACA,EAfI,EAAU,CAAC,EAcf,EAbA,SAAkB,CAAK,EAErB,IAAK,IADD,EAAO,OAAO,IAAA,CAAK,GACd,EAAI,EAAG,EAAI,EAAK,MAAA,CAAQ,IAC/B,CAAO,CAAC,CAAI,CAAC,EAAE,CAAC,CAAG,CAAK,CAAC,CAAI,CAAC,EAAE,CAAC,AAErC,EASA,EARA,SAAiB,CAAE,EACjB,IAAI,EAAW,CAAO,CAAC,EAAG,CAC1B,GAAI,AAAY,MAAZ,EACF,MAAM,AAAI,MAAM,oCAAsC,GAExD,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","sources":["<anon>","node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-bebd07d7ca768569.js","youtube-game-of-life/only-ts/scripts/index.ts","youtube-game-of-life/only-ts/scripts/game-of-life.ts","youtube-game-of-life/only-ts/scripts/functions/request-interval.ts","youtube-game-of-life/only-ts/scripts/functions/restrict-input.ts","node_modules/@parcel/runtime-js/lib/runtime-46626da0dc525a86.js","node_modules/@parcel/runtime-js/lib/helpers/get-worker-url.js"],"sourcesContent":["function $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\nvar $parcel$global =\ntypeof globalThis !== 'undefined'\n  ? globalThis\n  : typeof self !== 'undefined'\n  ? self\n  : typeof window !== 'undefined'\n  ? window\n  : typeof global !== 'undefined'\n  ? global\n  : {};\nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequiree4b2\"];\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequiree4b2\"] = parcelRequire;\n}\nparcelRequire.register(\"27Lyk\", function(module, exports) {\n\n$parcel$export(module.exports, \"register\", () => $18c11f3350a906ea$export$6503ec6e8aabbaf, (v) => $18c11f3350a906ea$export$6503ec6e8aabbaf = v);\n$parcel$export(module.exports, \"resolve\", () => $18c11f3350a906ea$export$f7ad0328861e2f03, (v) => $18c11f3350a906ea$export$f7ad0328861e2f03 = v);\nvar $18c11f3350a906ea$export$6503ec6e8aabbaf;\nvar $18c11f3350a906ea$export$f7ad0328861e2f03;\n\"use strict\";\nvar $18c11f3350a906ea$var$mapping = {};\nfunction $18c11f3350a906ea$var$register(pairs) {\n    var keys = Object.keys(pairs);\n    for(var i = 0; i < keys.length; i++)$18c11f3350a906ea$var$mapping[keys[i]] = pairs[keys[i]];\n}\nfunction $18c11f3350a906ea$var$resolve(id) {\n    var resolved = $18c11f3350a906ea$var$mapping[id];\n    if (resolved == null) throw new Error(\"Could not resolve bundle with id \" + id);\n    return resolved;\n}\n$18c11f3350a906ea$export$6503ec6e8aabbaf = $18c11f3350a906ea$var$register;\n$18c11f3350a906ea$export$f7ad0328861e2f03 = $18c11f3350a906ea$var$resolve;\n\n});\n\nvar $60fe6ba6bbb5f1da$exports = {};\n\n(parcelRequire(\"27Lyk\")).register(JSON.parse('{\"kAqiv\":\"index.452ded27.js\",\"3aufl\":\"worker-game-of-life-logic.60d3cd9a.js\"}'));\n\nfunction $20713660892d2e93$export$281c8d11e819ea94(fn, interval = 0) {\n    const obj = {\n        id: 0\n    };\n    let start = Date.now();\n    const animate = ()=>{\n        if (interval === 0) {\n            fn();\n            obj.id = requestAnimationFrame(animate);\n            return;\n        }\n        const now = Date.now();\n        const delta = now - start;\n        if (delta >= interval) {\n            fn();\n            start = now - delta % interval;\n        }\n        obj.id = requestAnimationFrame(animate);\n    };\n    obj.id = requestAnimationFrame(animate);\n    return obj;\n}\n\n\nfunction $d7cbbf251e962942$export$7913c0f032ea53bb(input, min, max) {\n    let value = parseInt(input.value);\n    if (isNaN(value)) value = min;\n    else if (value < min) value = min;\n    else if (value > max) value = max;\n    input.value = value.toString();\n    return value;\n}\n\n\nvar $bf724c28c7332a51$exports = {};\nvar $56b621a6dd25b2cb$exports = {};\n\"use strict\";\n$56b621a6dd25b2cb$exports = function(workerUrl, origin, isESM) {\n    if (origin === self.location.origin) // If the worker bundle's url is on the same origin as the document,\n    // use the worker bundle's own url.\n    return workerUrl;\n    else {\n        // Otherwise, create a blob URL which loads the worker bundle with `importScripts`.\n        var source = isESM ? \"import \" + JSON.stringify(workerUrl) + \";\" : \"importScripts(\" + JSON.stringify(workerUrl) + \");\";\n        return URL.createObjectURL(new Blob([\n            source\n        ], {\n            type: \"application/javascript\"\n        }));\n    }\n};\n\n\n\nlet $bf724c28c7332a51$var$url = new URL((parcelRequire(\"27Lyk\")).resolve(\"3aufl\"), import.meta.url);\n$bf724c28c7332a51$exports = $56b621a6dd25b2cb$exports($bf724c28c7332a51$var$url.toString(), $bf724c28c7332a51$var$url.origin, true);\n\n\nclass $e2b0766be83c46e4$export$8981e2cb2c3fa123 {\n    constructor({ injectedNode: injectedNode, cellsCountX: cellsCountX, cellsCountY: cellsCountY, random: random, speed: speed, localStorageUse: localStorageUse, popupHidden: popupHidden }){\n        this.cycles = 0;\n        this.played = false;\n        this.interval = 500;\n        this.gameTime = 0;\n        this.gameStartTime = 0;\n        this.gameLastTime = 0;\n        this.random = false;\n        this.speed = 0;\n        this.activeCells = 0;\n        this.localStorageUse = false;\n        this.isDragging = false;\n        this.isRealDragging = false;\n        this.worker = new Worker($bf724c28c7332a51$exports);\n        this.loading = false;\n        this.focusedInput = null;\n        this.popupHidden = false;\n        this.togglePopup = (popupHidden)=>{\n            if (this.localStorageUse === true) this.setLocalStorage(\"popupHidden\", this.popupHidden);\n            if (this.popupHidden === true) {\n                this.nodes.popupNode.classList.add(\"popup_hidden\");\n                this.nodes.popupCloseNode.textContent = \"Открыть\";\n            } else {\n                this.nodes.popupNode.classList.remove(\"popup_hidden\");\n                this.nodes.popupCloseNode.textContent = \"Скрыть\";\n            }\n        };\n        this.generateCellByClick = (event, moved = false)=>{\n            if (this.played === true) return;\n            const rect = this.nodes.canvasNode.getBoundingClientRect();\n            const x = event.clientX - rect.left;\n            const y = event.clientY - rect.top;\n            const col = Math.floor(x / this.cellSize);\n            const row = Math.floor(y / this.cellSize);\n            const key = this.getKey(row, col);\n            const isCellAlive = this.field.get(key);\n            const deleteCell = ()=>{\n                this.activeCells--;\n                this.field.set(key, false);\n                this.sendWorkerDeleteOrCreateCell(\"delete\", key).then();\n            };\n            const createCell = ()=>{\n                this.activeCells++;\n                this.field.set(key, true);\n                this.sendWorkerDeleteOrCreateCell(\"create\", key).then();\n            };\n            if (isCellAlive === false && moved === true) createCell();\n            else if (isCellAlive === false && moved === false) createCell();\n            else if (isCellAlive === true && moved === false) deleteCell();\n            this.renderPopulation();\n            this.drawField();\n        };\n        this.calcSpeedInputChange = ()=>{\n            const lastGameState = this.played;\n            this.stopGame();\n            const currentVal = this.nodes.popupSpeedRangeNode.valueAsNumber;\n            const max = Number(this.nodes.popupSpeedRangeNode.max);\n            const min = Number(this.nodes.popupSpeedRangeNode.min);\n            const end = max - min;\n            const currentValMod = currentVal - min;\n            const currentValPercent = currentValMod / end;\n            const newSpeed = Number((currentValPercent * 9 + 1).toFixed(1));\n            this.speed = newSpeed;\n            this.nodes.popupSpeedInfoNode.textContent = String(this.speed);\n            if (this.localStorageUse) this.setLocalStorage(\"speed\", this.speed);\n            if (lastGameState === true) this.startGame();\n        };\n        this.clear = ()=>{\n            this.loading;\n            this.stopGame();\n            this.gameTime = 0;\n            this.gameLastTime = 0;\n            this.gameStartTime = 0;\n            this.cycles = 0;\n            this.disableInputs();\n            this.sendWorkerInitFields({\n                random: false,\n                rows: this.rows,\n                cols: this.cols\n            }).then((data)=>{\n                this.drawField();\n                this.renderTime();\n                this.renderPopup();\n                this.enableInputs();\n            });\n        };\n        this.generateNewFields = ()=>{\n            this.loading;\n            this.sendWorkerInitFields({\n                random: true,\n                rows: this.rows,\n                cols: this.cols\n            }).then((data)=>{\n                this.cycles = 0;\n                this.drawField();\n                this.renderPopup();\n            });\n        };\n        this.resizeAndDraw = ()=>{\n            this.setCanvasSize();\n            this.drawField();\n        };\n        this.setColorCell = ()=>{\n            this.colorCell = getComputedStyle(document.documentElement).getPropertyValue(\"--color\");\n        };\n        this.setColorCellAndDraw = ()=>{\n            this.setColorCell();\n            this.drawField();\n        };\n        this.setCanvasSize = ()=>{\n            const width = this.nodes.wrapperCanvasNode.offsetWidth;\n            const height = this.nodes.wrapperCanvasNode.offsetHeight;\n            const aspectRatio = this.cols / this.rows;\n            const canvasWidth = Math.min(width, height * aspectRatio);\n            const canvasHeight = canvasWidth / aspectRatio;\n            this.cellSize = canvasWidth / this.cols;\n            const xPadding = (width - canvasWidth) / 2;\n            const yPadding = (height - canvasHeight) / 2;\n            this.nodes.canvasNode.width = canvasWidth;\n            this.nodes.canvasNode.height = canvasHeight;\n            this.nodes.wrapperCanvasNode.style.padding = `${yPadding}px ${xPadding}px`;\n        };\n        this.stepGame = ()=>{\n            if (this.loading === true) return;\n            return this.sendWorkerUpdateField().then((data)=>{\n                this.drawField();\n                this.cycles = this.cycles + 1;\n                this.renderPopup();\n                return data;\n            });\n        };\n        this.stepAnimationRenderTime = ()=>{\n            this.renderTime();\n        };\n        if (speed < 1) throw new Error(\"GameOfLife: speed не может быть меньше 1\");\n        if (speed > 10) throw new Error(\"GameOfLife: speed не может быть больше 10\");\n        this.rows = cellsCountX;\n        this.cols = cellsCountY;\n        this.random = random;\n        this.speed = speed;\n        this.localStorageUse = localStorageUse;\n        this.popupHidden = popupHidden;\n        this.initNodes(injectedNode);\n        this.ctx = this.nodes.canvasNode.getContext(\"2d\");\n        if (this.localStorageUse) this.useLocalStorage();\n        this.initCalcSpeed();\n        this.setCanvasSize();\n        this.setColorCell();\n        this.initInputNodes();\n        this.initPopupHidden();\n        this.sendWorkerInitFields({\n            random: this.random,\n            rows: this.rows,\n            cols: this.cols\n        }).then(({ activeCells: activeCells, field: field, buffer: buffer })=>{\n            this.initEventListeners();\n            this.drawField();\n            this.renderPopup();\n        });\n    }\n    initInputNodes() {\n        this.nodes.popupInputRowsNode.value = String(this.rows);\n        this.nodes.popupInputColsNode.value = String(this.cols);\n    }\n    initPopupHidden() {\n        this.togglePopup(this.popupHidden);\n    }\n    disableInputs() {\n        this.nodes.popupInputRowsNode.disabled = true;\n        this.nodes.popupInputColsNode.disabled = true;\n    }\n    enableInputs() {\n        this.nodes.popupInputRowsNode.disabled = false;\n        this.nodes.popupInputColsNode.disabled = false;\n        if (this.focusedInput !== null) {\n            this.focusedInput.focus();\n            this.focusedInput = null;\n        }\n    }\n    sendWorkerInitFields({ random: random, rows: rows, cols: cols }) {\n        this.load();\n        this.disableInputs();\n        this.worker.postMessage({\n            type: \"initFields\",\n            payload: {\n                random: random,\n                rows: rows,\n                cols: cols\n            }\n        });\n        const resultWorker = new Promise((resolve, reject)=>{\n            this.worker.onmessage = (event)=>{\n                const message = event.data;\n                this.loadComplete();\n                this.enableInputs();\n                if (message.type === \"result: initFields\") {\n                    const data = message.data;\n                    const { activeCells: activeCells, field: field, buffer: buffer } = data;\n                    this.activeCells = activeCells;\n                    this.field = field;\n                    this.buffer = buffer;\n                    resolve(data);\n                }\n                reject(false);\n            };\n        });\n        return resultWorker;\n    }\n    load() {\n        this.loading = true;\n        this.nodes.popupLoadNode.classList.add(\"popup__load_active\");\n        this.nodes.popupNode.classList.add(\"popup_load\");\n    }\n    loadComplete() {\n        this.loading = false;\n        this.nodes.popupLoadNode.classList.remove(\"popup__load_active\");\n        this.nodes.popupNode.classList.remove(\"popup_load\");\n    }\n    initEventListeners() {\n        window.addEventListener(\"resize\", this.resizeAndDraw);\n        const matchMediaDark = window.matchMedia(\"(prefers-color-scheme: dark)\");\n        matchMediaDark.addEventListener(\"change\", this.setColorCellAndDraw);\n        this.nodes.popupPauseNode.addEventListener(\"click\", ()=>{\n            if (this.played === false) return;\n            this.stopGame();\n        });\n        this.nodes.popupPlayNode.addEventListener(\"click\", ()=>{\n            if (this.played === true) return;\n            this.startGame();\n        });\n        this.nodes.popupGenerateNode.addEventListener(\"click\", this.generateNewFields);\n        this.nodes.canvasNode.addEventListener(\"pointerdown\", (event)=>{\n            if (this.loading === true) return;\n            if (event.button === 2 || event.button === 1) return false; // Если это правая или средняя кнопка мыши, это не тот клик\n            this.isDragging = true;\n            this.isRealDragging = false;\n        });\n        this.nodes.canvasNode.addEventListener(\"pointermove\", (event)=>{\n            if (event.button === 2 || event.button === 1) return false; // Если это правая или средняя кнопка мыши, это не тот клик\n            if (this.isDragging === true && this.loading === false) {\n                this.isRealDragging = true;\n                this.generateCellByClick(event, true);\n            }\n        });\n        document.addEventListener(\"pointerup\", (event)=>{\n            if (event.button === 2 || event.button === 1) return false; // Если это правая или средняя кнопка мыши, это не тот клик\n            const clickOnPopupBool = this.isClickOnElement(event, this.nodes.popupNode);\n            if (clickOnPopupBool === true) return;\n            if (this.isRealDragging === false && this.loading === false) this.generateCellByClick(event, false);\n            this.isDragging = false;\n            this.isRealDragging = false;\n        });\n        this.nodes.popupRandomCheckboxNode.addEventListener(\"input\", ()=>{\n            this.random = !this.random;\n            if (this.localStorageUse) this.setLocalStorage(\"random\", this.random);\n            this.renderRandom();\n        });\n        this.nodes.popupSpeedRangeNode.addEventListener(\"input\", this.calcSpeedInputChange);\n        this.nodes.popupClearNode.addEventListener(\"click\", this.clear);\n        this.nodes.popupStepNode.addEventListener(\"click\", ()=>{\n            this.disableInputs();\n            this.stepGame()?.then((data)=>{\n                this.enableInputs();\n            });\n        });\n        this.nodes.popupInputRowsNode.addEventListener(\"input\", ()=>{\n            const newRows = (0, $d7cbbf251e962942$export$7913c0f032ea53bb)(this.nodes.popupInputRowsNode, 0, 2000);\n            if (this.localStorageUse) this.setLocalStorage(\"rows\", newRows);\n            this.focusedInput = this.nodes.popupInputRowsNode;\n            this.resizeFieldRows(newRows);\n        });\n        this.nodes.popupInputColsNode.addEventListener(\"input\", ()=>{\n            const newCols = (0, $d7cbbf251e962942$export$7913c0f032ea53bb)(this.nodes.popupInputColsNode, 0, 2000);\n            if (this.localStorageUse) this.setLocalStorage(\"cols\", newCols);\n            this.focusedInput = this.nodes.popupInputColsNode;\n            this.resizeFieldCols(newCols);\n        });\n        this.nodes.popupCloseNode.addEventListener(\"click\", ()=>{\n            this.popupHidden = !this.popupHidden;\n            this.togglePopup(this.popupHidden);\n        });\n    }\n    resizeFieldRows(newRows) {\n        if (this.loading === true) return;\n        this.sendWorkerResizeField(newRows, this.cols, this.random).then((data)=>{\n            this.setCanvasSize();\n            this.drawField();\n            this.renderTime();\n            this.renderPopup();\n        });\n    }\n    resizeFieldCols(newCols) {\n        if (this.loading === true) return;\n        this.sendWorkerResizeField(this.rows, newCols, this.random).then((data)=>{\n            this.setCanvasSize();\n            this.drawField();\n            this.renderTime();\n            this.renderPopup();\n        });\n    }\n    sendWorkerResizeField(newRows, newCols, random) {\n        this.load();\n        this.disableInputs();\n        this.worker.postMessage({\n            type: \"resizeField\",\n            payload: {\n                newRows: newRows,\n                newCols: newCols,\n                random: random\n            }\n        });\n        const resultWorker = new Promise((resolve, reject)=>{\n            this.worker.onmessage = (event)=>{\n                const message = event.data;\n                this.loadComplete();\n                this.enableInputs();\n                if (message.type === \"result: resizeField\") {\n                    const data = message.data;\n                    const { field: field, buffer: buffer, activeCells: activeCells, rows: rows, cols: cols } = data;\n                    this.field = field;\n                    this.buffer = buffer;\n                    this.activeCells = activeCells;\n                    this.rows = rows;\n                    this.cols = cols;\n                    resolve(data);\n                }\n                reject(false);\n            };\n        }).catch(()=>{});\n        return resultWorker;\n    }\n    isClickOnElement(event, element) {\n        const target = event.target; // Получаем целевой элемент клика\n        // Проверяем, является ли целевой элемент или его родительские элементы равным заданному элементу\n        let currentNode = target;\n        while(currentNode != null){\n            if (currentNode === element) return true;\n            currentNode = currentNode.parentElement;\n        }\n        // Если не было найдено совпадений, возвращаем false\n        return false;\n    }\n    sendWorkerDeleteOrCreateCell(typeAction, key) {\n        this.load();\n        this.worker.postMessage({\n            type: \"deleteOrCreateCell\",\n            payload: {\n                typeAction: typeAction,\n                key: key\n            }\n        });\n        const resultWorker = new Promise((resolve, reject)=>{\n            this.worker.onmessage = (event)=>{\n                const message = event.data;\n                this.loadComplete();\n                if (message.type === \"result: deleteOrCreateCell\") {\n                    const data = message.data;\n                    resolve(data);\n                }\n                reject(false);\n            };\n        });\n        return resultWorker;\n    }\n    initCalcSpeed() {\n        const max = Number(this.nodes.popupSpeedRangeNode.max);\n        const min = Number(this.nodes.popupSpeedRangeNode.min);\n        const speedPercent = (this.speed - 1) / 9;\n        const value = min + speedPercent * (max - min);\n        this.nodes.popupSpeedRangeNode.value = String(value);\n        this.nodes.popupSpeedInfoNode.textContent = String(this.speed);\n    }\n    useLocalStorage() {\n        const lastLocalStorage = this.getLocalStorage();\n        if (lastLocalStorage.random !== undefined) this.random = lastLocalStorage.random;\n        if (lastLocalStorage.speed !== undefined) this.speed = lastLocalStorage.speed;\n        if (lastLocalStorage.rows !== undefined) this.rows = lastLocalStorage.rows;\n        if (lastLocalStorage.cols !== undefined) this.cols = lastLocalStorage.cols;\n        if (lastLocalStorage.popupHidden !== undefined) this.popupHidden = lastLocalStorage.popupHidden;\n    }\n    initNodes(injectedNode) {\n        injectedNode.innerHTML = `\n\t\t\t<div class=\"wrapper\">\n\t\t\t\t<div class=\"wrapper-canvas\">\n\t\t\t\t\t<canvas class=\"canvas\"></canvas>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"popup\">\n\t\t\t\t\t<div class=\"popup__item popup__play\">Play</div>\n\t\t\t\t\t<div class=\"popup__item popup__pause\">Пауза</div>\n\t\t\t\t\t<div class=\"popup__item popup__clear\">Очистить</div>\n\t\t\t\t\t<div class=\"popup__item popup__step\">Шаг</div>\n\t\t\t\t\t<div class=\"popup__item popup__generate\">Сгенерировать</div>\n\t\t\t\t\t<label class=\"popup__item popup__random-checkbox-item\">\n\t\t\t\t\t\t<input type=\"checkbox\" class=\"popup__random-checkbox\">\n\t\t\t\t\t\t<span>Рандом</span>\n\t\t\t\t\t</label>\n\t\t\t\t\t<div class=\"popup__item\">\n\t\t\t\t\t\tВремя:\n\t\t\t\t\t\t<span class=\"popup__time\">0.0</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"popup__item\">Поколение: <span class=\"popup__cycles\">0</span></div>\n\t\t\t\t\t<div class=\"popup__item\">Население: <span class=\"popup__population\">0</span></div>\n\t\t\t\t\t<div class=\"popup__item\">\n\t\t\t\t\t\t<span>Скорость: </span>\n\t\t\t\t\t\t<span class=\"popup__speed-info\">1</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"popup__item\">\n\t\t\t\t\t\t<input class=\"popup__speed-range\" type=\"range\" min=\"0\" max=\"100\" value=\"50\">\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"popup__item popup__item_inputs\">\n\t\t\t\t\t\t<input type=\"number\" class=\"popup__rows popup__inputs\" placeholder=\"rows\" min=\"0\" max=\"2000\">\n\t\t\t\t\t\t<input type=\"number\" class=\"popup__cols popup__inputs\" placeholder=\"cols\" min=\"0\" max=\"2000\">\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"popup__item popup__close\">Скрыть</div>\n\n\t\t\t\t\t<div class=\"popup__item popup__load\">Загрузка</div>\n\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t`;\n        const popupNode = this._querySelector(injectedNode, \".popup\");\n        const canvasNode = this._querySelector(injectedNode, \".canvas\");\n        const wrapperCanvasNode = this._querySelector(injectedNode, \".wrapper-canvas\");\n        const popupPlayNode = this._querySelector(popupNode, \".popup__play\");\n        const popupPauseNode = this._querySelector(popupNode, \".popup__pause\");\n        const popupTimeNode = this._querySelector(popupNode, \".popup__time\");\n        const popupPopulationNode = this._querySelector(popupNode, \".popup__population\");\n        const popupCyclesNode = this._querySelector(popupNode, \".popup__cycles\");\n        const popupGenerateNode = this._querySelector(popupNode, \".popup__generate\");\n        const popupRandomCheckboxNode = this._querySelector(popupNode, \".popup__random-checkbox\");\n        const popupSpeedRangeNode = this._querySelector(popupNode, \".popup__speed-range\");\n        const popupSpeedInfoNode = this._querySelector(popupNode, \".popup__speed-info\");\n        const popupClearNode = this._querySelector(popupNode, \".popup__clear\");\n        const popupStepNode = this._querySelector(popupNode, \".popup__step\");\n        const popupLoadNode = this._querySelector(popupNode, \".popup__load\");\n        const popupInputRowsNode = this._querySelector(popupNode, \".popup__rows\");\n        const popupInputColsNode = this._querySelector(popupNode, \".popup__cols\");\n        const popupCloseNode = this._querySelector(popupNode, \".popup__close\");\n        this.nodes = {\n            canvasNode: canvasNode,\n            popupNode: popupNode,\n            popupPlayNode: popupPlayNode,\n            popupPauseNode: popupPauseNode,\n            popupTimeNode: popupTimeNode,\n            popupPopulationNode: popupPopulationNode,\n            popupCyclesNode: popupCyclesNode,\n            popupGenerateNode: popupGenerateNode,\n            wrapperCanvasNode: wrapperCanvasNode,\n            popupRandomCheckboxNode: popupRandomCheckboxNode,\n            popupSpeedRangeNode: popupSpeedRangeNode,\n            popupSpeedInfoNode: popupSpeedInfoNode,\n            popupClearNode: popupClearNode,\n            popupStepNode: popupStepNode,\n            popupLoadNode: popupLoadNode,\n            popupInputRowsNode: popupInputRowsNode,\n            popupInputColsNode: popupInputColsNode,\n            popupCloseNode: popupCloseNode\n        };\n    }\n    _querySelector(parentNode, selector) {\n        const node = parentNode.querySelector(selector);\n        if (node === null) throw new Error(`GameOfLife: элемент с классом ${selector} не найден`);\n        return node;\n    }\n    getKey(row, col) {\n        return `${row}-${col}`;\n    }\n    drawField() {\n        this.load();\n        this.ctx.clearRect(0, 0, this.nodes.canvasNode.width, this.nodes.canvasNode.height);\n        const cellSize = this.cellSize;\n        this.ctx.fillStyle = this.colorCell;\n        for(let i = 0; i < this.rows; i++)for(let j = 0; j < this.cols; j++){\n            const key = this.getKey(i, j);\n            if (this.field.get(key)) this.ctx.fillRect(j * cellSize, i * cellSize, cellSize, cellSize);\n        }\n        this.loadComplete();\n    }\n    sendWorkerUpdateField() {\n        this.load();\n        this.worker.postMessage({\n            type: \"updateField\",\n            payload: {}\n        });\n        const resultWorker = new Promise((resolve, reject)=>{\n            this.worker.onmessage = (event)=>{\n                const message = event.data;\n                this.loadComplete();\n                if (message.type === \"result: updateField\") {\n                    const data = message.data;\n                    const { activeCells: activeCells, field: field, buffer: buffer } = data;\n                    this.activeCells = activeCells;\n                    this.field = field;\n                    this.buffer = buffer;\n                    resolve(data);\n                }\n                reject(false);\n            };\n        });\n        return resultWorker;\n    }\n    renderPopup() {\n        this.renderPopulation();\n        this.renderRandom();\n        this.nodes.popupCyclesNode.textContent = String(this.cycles);\n        this.nodes.popupRandomCheckboxNode.checked = this.random;\n    }\n    renderTime() {\n        let gameTime = Date.now() - this.gameStartTime + this.gameLastTime;\n        if (this.gameStartTime === 0) gameTime = 0;\n        this.gameTime = gameTime;\n        this.nodes.popupTimeNode.textContent = (this.gameTime / 1000).toFixed(1);\n    }\n    renderRandom() {\n        if (this.random === true) this.nodes.popupGenerateNode.classList.add(\"popup__generate_active\");\n        else this.nodes.popupGenerateNode.classList.remove(\"popup__generate_active\");\n    }\n    renderPopulation() {\n        this.nodes.popupPopulationNode.textContent = String(this.activeCells);\n    }\n    startGame() {\n        this.disableInputs();\n        this.played = true;\n        this.gameStartTime = Date.now();\n        this.animationObj = (0, $20713660892d2e93$export$281c8d11e819ea94)(this.stepGame, this.interval / this.speed ** 1.5);\n        this.animationTimeId = (0, $20713660892d2e93$export$281c8d11e819ea94)(this.stepAnimationRenderTime);\n    }\n    stopGame() {\n        if (this.played === false) return;\n        this.played = false;\n        this.gameLastTime = this.gameTime;\n        cancelAnimationFrame(this.animationObj.id);\n        cancelAnimationFrame(this.animationTimeId.id);\n        this.enableInputs();\n    }\n    getLocalStorage() {\n        return JSON.parse(localStorage.getItem(\"life\") || \"{}\");\n    }\n    setLocalStorage(key, value) {\n        const lastLocalStorage = this.getLocalStorage();\n        lastLocalStorage[key] = value;\n        localStorage.setItem(\"life\", JSON.stringify(lastLocalStorage));\n    }\n}\n\n\nconst $b112110fd2ad031c$var$injectedNode = document.querySelector(\".injected-game-life\");\nif ($b112110fd2ad031c$var$injectedNode === null) throw new Error(\"injectedNode не найден\");\nconst $b112110fd2ad031c$var$game = new (0, $e2b0766be83c46e4$export$8981e2cb2c3fa123)({\n    cellsCountX: 100,\n    cellsCountY: 100,\n    random: false,\n    speed: 1,\n    localStorageUse: true,\n    popupHidden: false,\n    injectedNode: $b112110fd2ad031c$var$injectedNode\n});\n\n\n//# sourceMappingURL=index.452ded27.js.map\n","\"use strict\";\n\nvar mapping = {};\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\nfunction resolve(id) {\n  var resolved = mapping[id];\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n  return resolved;\n}\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"kAqiv\\\":\\\"index.452ded27.js\\\",\\\"3aufl\\\":\\\"worker-game-of-life-logic.60d3cd9a.js\\\"}\"));","import { GameOfLife } from \"./game-of-life\";\n\nconst injectedNode = document.querySelector<HTMLElement>('.injected-game-life');\n\nif (injectedNode === null) {\n\tthrow new Error('injectedNode не найден');\n}\n\nconst game = new GameOfLife({\n\tcellsCountX: 100,\n\tcellsCountY: 100,\n\trandom: false,\n\tspeed: 1,\n\tlocalStorageUse: true,\n\tpopupHidden: false,\n\tinjectedNode: injectedNode\n});\n","import { GameOfLifeLocalStorage, GameOfLifeNodes, GameOfLifeParams, GameOfLifeWorkerResult } from \"../interfacesOrTypes\";\nimport { requestInterval } from \"./functions/request-interval\";\nimport { restrictInputValue } from \"./functions/restrict-input\";\n\nexport class GameOfLife {\n\tprivate ctx: CanvasRenderingContext2D;\n\tprivate rows: number;\n\tprivate cols: number;\n\tprivate cellSize: number;\n\tprivate field: Map<string, boolean>;\n\tprivate buffer: Map<string, boolean>;\n\tprivate colorCell: string;\n\tprivate animationObj: { id: number };\n\tprivate nodes: GameOfLifeNodes;\n\tprivate cycles: number = 0;\n\tprivate played: boolean = false;\n\tprivate interval: number = 500;\n\tprivate gameTime: number = 0;\n\tprivate gameStartTime: number = 0;\n\tprivate gameLastTime: number = 0;\n\tprivate random: boolean = false;\n\tprivate speed: number = 0;\n\tprivate activeCells: number = 0;\n\tprivate localStorageUse: boolean = false;\n\tprivate isDragging: boolean = false;\n\tprivate isRealDragging: boolean = false;\n\tprivate animationTimeId: { id: number };\n\tprivate worker: Worker = new Worker(new URL('workers/worker-game-of-life-logic.js', import.meta.url));\n\tprivate loading: boolean = false;\n\tprivate focusedInput: HTMLInputElement | null = null;\n\tprivate popupHidden: boolean = false;\n\n\tconstructor({ injectedNode, cellsCountX, cellsCountY, random, speed, localStorageUse, popupHidden }: GameOfLifeParams) {\n\t\tif (speed < 1) {\n\t\t\tthrow new Error('GameOfLife: speed не может быть меньше 1');\n\t\t}\n\t\tif (speed > 10) {\n\t\t\tthrow new Error('GameOfLife: speed не может быть больше 10');\n\t\t}\n\n\t\tthis.rows = cellsCountX;\n\t\tthis.cols = cellsCountY;\n\t\tthis.random = random;\n\t\tthis.speed = speed;\n\t\tthis.localStorageUse = localStorageUse;\n\t\tthis.popupHidden = popupHidden;\n\n\t\tthis.initNodes(injectedNode);\n\t\tthis.ctx = this.nodes.canvasNode.getContext(\"2d\")!;\n\t\tif (this.localStorageUse) this.useLocalStorage();\n\t\tthis.initCalcSpeed();\n\t\tthis.setCanvasSize();\n\t\tthis.setColorCell();\n\t\tthis.initInputNodes();\n\t\tthis.initPopupHidden();\n\n\t\tthis.sendWorkerInitFields({\n\t\t\trandom: this.random,\n\t\t\trows: this.rows,\n\t\t\tcols: this.cols\n\t\t})\n\t\t.then(({ activeCells, field, buffer }) => {\n\t\t\tthis.initEventListeners();\n\t\t\tthis.drawField();\n\t\t\tthis.renderPopup();\n\t\t});\n\t}\n\n\tprivate initInputNodes(): void {\n\t\tthis.nodes.popupInputRowsNode.value = String(this.rows);\n\t\tthis.nodes.popupInputColsNode.value = String(this.cols);\n\t}\n\n\tprivate initPopupHidden(): void {\n\t\tthis.togglePopup(this.popupHidden);\n\t}\n\n\tprivate disableInputs(): void {\n\t\tthis.nodes.popupInputRowsNode.disabled = true;\n\t\tthis.nodes.popupInputColsNode.disabled = true;\n\t}\n\n\tprivate enableInputs(): void {\n\t\tthis.nodes.popupInputRowsNode.disabled = false;\n\t\tthis.nodes.popupInputColsNode.disabled = false;\n\n\t\tif (this.focusedInput !== null) {\n\t\t\tthis.focusedInput.focus();\n\t\t\tthis.focusedInput = null;\n\t\t}\n\t}\n\n\tprivate sendWorkerInitFields({\n\t\trandom, rows, cols\n\t}: { random: boolean; rows: number; cols: number }): Promise<GameOfLifeWorkerResult> {\n\n\t\tthis.load();\n\t\tthis.disableInputs();\n\n\t\tthis.worker.postMessage({\n\t\t\ttype: 'initFields',\n\t\t\tpayload: {\n\t\t\t\trandom: random,\n\t\t\t\trows: rows,\n\t\t\t\tcols: cols\n\t\t\t}\n\t\t});\n\n\t\tconst resultWorker = new Promise<GameOfLifeWorkerResult>((resolve, reject) => {\n\t\t\tthis.worker.onmessage = (event) => {\n\t\t\t\tconst message = event.data;\n\n\t\t\t\tthis.loadComplete();\n\t\t\t\tthis.enableInputs();\n\n\t\t\t\tif (message.type === 'result: initFields') {\n\t\t\t\t\tconst data: GameOfLifeWorkerResult = message.data;\n\t\t\t\t\tconst { activeCells, field, buffer } = data;\n\n\t\t\t\t\tthis.activeCells = activeCells;\n\t\t\t\t\tthis.field = field;\n\t\t\t\t\tthis.buffer = buffer;\n\n\t\t\t\t\tresolve(data);\n\t\t\t\t}\n\n\t\t\t\treject(false);\n\t\t\t};\n\t\t});\n\n\t\treturn resultWorker;\n\t}\n\n\tprivate load(): void {\n\t\tthis.loading = true;\n\t\tthis.nodes.popupLoadNode.classList.add('popup__load_active');\n\t\tthis.nodes.popupNode.classList.add('popup_load');\n\t}\n\n\tprivate loadComplete(): void {\n\t\tthis.loading = false;\n\t\tthis.nodes.popupLoadNode.classList.remove('popup__load_active');\n\t\tthis.nodes.popupNode.classList.remove('popup_load');\n\t}\n\n\tprivate initEventListeners(): void {\n\t\twindow.addEventListener('resize', this.resizeAndDraw);\n\t\tconst matchMediaDark = window.matchMedia('(prefers-color-scheme: dark)');\n\n\t\tmatchMediaDark.addEventListener('change', this.setColorCellAndDraw);\n\n\t\tthis.nodes.popupPauseNode.addEventListener('click', () => {\n\t\t\tif (this.played === false) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.stopGame();\n\t\t});\n\n\t\tthis.nodes.popupPlayNode.addEventListener('click', () => {\n\t\t\tif (this.played === true) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.startGame();\n\t\t});\n\n\t\tthis.nodes.popupGenerateNode.addEventListener('click', this.generateNewFields);\n\n\t\tthis.nodes.canvasNode.addEventListener('pointerdown', (event) => {\n\t\t\tif (this.loading === true) return;\n\t\t\tif (event.button === 2 || event.button === 1) return false; // Если это правая или средняя кнопка мыши, это не тот клик\n\t\t\tthis.isDragging = true;\n\t\t\tthis.isRealDragging = false;\n\t\t});\n\n\t\tthis.nodes.canvasNode.addEventListener('pointermove', (event) => {\n\t\t\tif (event.button === 2 || event.button === 1) return false; // Если это правая или средняя кнопка мыши, это не тот клик\n\t\t\tif (this.isDragging === true && this.loading === false) {\n\t\t\t\tthis.isRealDragging = true;\n\t\t\t\tthis.generateCellByClick(event, true)\n\t\t\t};\n\t\t});\n\n\t\tdocument.addEventListener('pointerup', (event) => {\n\t\t\tif (event.button === 2 || event.button === 1) return false; // Если это правая или средняя кнопка мыши, это не тот клик\n\t\t\tconst clickOnPopupBool = this.isClickOnElement(event, this.nodes.popupNode);\n\t\t\tif (clickOnPopupBool === true) return;\n\t\t\tif (this.isRealDragging === false && this.loading === false) this.generateCellByClick(event, false);\n\n\t\t\tthis.isDragging = false;\n\t\t\tthis.isRealDragging = false;\n\t\t});\n\n\t\tthis.nodes.popupRandomCheckboxNode.addEventListener('input', () => {\n\t\t\tthis.random = !this.random;\n\t\t\tif (this.localStorageUse) this.setLocalStorage('random', this.random);\n\t\t\tthis.renderRandom();\n\t\t});\n\n\t\tthis.nodes.popupSpeedRangeNode.addEventListener('input', this.calcSpeedInputChange);\n\t\tthis.nodes.popupClearNode.addEventListener('click', this.clear);\n\n\t\tthis.nodes.popupStepNode.addEventListener('click', () => {\n\t\t\tthis.disableInputs();\n\t\t\tthis.stepGame()?.then(data => {\n\t\t\t\tthis.enableInputs();\n\t\t\t});\n\t\t});\n\n\t\tthis.nodes.popupInputRowsNode.addEventListener('input', () => {\n\t\t\tconst newRows = restrictInputValue(this.nodes.popupInputRowsNode, 0, 2000);\n\t\t\tif (this.localStorageUse) this.setLocalStorage('rows', newRows);\n\n\t\t\tthis.focusedInput = this.nodes.popupInputRowsNode;\n\t\t\tthis.resizeFieldRows(newRows);\n\t\t});\n\n\t\tthis.nodes.popupInputColsNode.addEventListener('input', () => {\n\t\t\tconst newCols = restrictInputValue(this.nodes.popupInputColsNode, 0, 2000);\n\t\t\tif (this.localStorageUse) this.setLocalStorage('cols', newCols);\n\n\t\t\tthis.focusedInput = this.nodes.popupInputColsNode;\n\t\t\tthis.resizeFieldCols(newCols);\n\t\t});\n\n\t\tthis.nodes.popupCloseNode.addEventListener('click', () => {\n\t\t\tthis.popupHidden = !this.popupHidden;\n\t\t\tthis.togglePopup(this.popupHidden);\n\t\t});\n\t}\n\n\tprivate togglePopup = (popupHidden: boolean): void => {\n\t\tif (this.localStorageUse === true) this.setLocalStorage('popupHidden', this.popupHidden);\n\n\t\tif (this.popupHidden === true) {\n\t\t\tthis.nodes.popupNode.classList.add('popup_hidden');\n\t\t\tthis.nodes.popupCloseNode.textContent = 'Открыть';\n\t\t} else {\n\t\t\tthis.nodes.popupNode.classList.remove('popup_hidden');\n\t\t\tthis.nodes.popupCloseNode.textContent = 'Скрыть';\n\t\t}\n\t}\n\n\tprivate resizeFieldRows(newRows: number): void {\n\t\tif (this.loading === true) return;\n\n\t\tthis.sendWorkerResizeField(newRows, this.cols, this.random)\n\t\t.then((data) => {\n\t\t\tthis.setCanvasSize();\n\t\t\tthis.drawField();\n\t\t\tthis.renderTime();\n\t\t\tthis.renderPopup();\n\t\t});\n\t}\n\n\tprivate resizeFieldCols(newCols: number): void {\n\t\tif (this.loading === true) return;\n\n\t\tthis.sendWorkerResizeField(this.rows, newCols, this.random)\n\t\t.then((data) => {\n\t\t\tthis.setCanvasSize();\n\t\t\tthis.drawField();\n\t\t\tthis.renderTime();\n\t\t\tthis.renderPopup();\n\t\t});\n\t}\n\n\tprivate sendWorkerResizeField(newRows: number, newCols: number, random: boolean): Promise<void | GameOfLifeWorkerResult> {\n\t\tthis.load();\n\t\tthis.disableInputs();\n\n\t\tthis.worker.postMessage({\n\t\t\ttype: 'resizeField',\n\t\t\tpayload: {\n\t\t\t\tnewRows: newRows,\n\t\t\t\tnewCols: newCols,\n\t\t\t\trandom: random\n\t\t\t}\n\t\t});\n\n\t\tconst resultWorker = new Promise<GameOfLifeWorkerResult>((resolve, reject) => {\n\t\t\tthis.worker.onmessage = (event) => {\n\t\t\t\tconst message = event.data;\n\n\t\t\t\tthis.loadComplete();\n\t\t\t\tthis.enableInputs();\n\n\n\t\t\t\tif (message.type === 'result: resizeField') {\n\t\t\t\t\tconst data: GameOfLifeWorkerResult = message.data;\n\t\t\t\t\tconst { field, buffer, activeCells, rows, cols } = data;\n\n\t\t\t\t\tthis.field = field;\n\t\t\t\t\tthis.buffer = buffer;\n\t\t\t\t\tthis.activeCells = activeCells;\n\t\t\t\t\tthis.rows = rows;\n\t\t\t\t\tthis.cols = cols;\n\n\t\t\t\t\tresolve(data);\n\t\t\t\t}\n\n\t\t\t\treject(false);\n\t\t\t};\n\t\t}).catch(() => {});\n\n\t\treturn resultWorker;\n\t}\n\n\tprivate isClickOnElement(event: MouseEvent, element: Element): boolean {\n\t\tconst target = event.target as Element; // Получаем целевой элемент клика\n\n\t\t// Проверяем, является ли целевой элемент или его родительские элементы равным заданному элементу\n\t\tlet currentNode: Element | null = target;\n\t\twhile (currentNode != null) {\n\t\t\tif (currentNode === element) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tcurrentNode = currentNode.parentElement;\n\t\t}\n\n\t\t// Если не было найдено совпадений, возвращаем false\n\t\treturn false;\n\t}\n\n\tprivate sendWorkerDeleteOrCreateCell(typeAction: 'delete' | 'create', key: string): Promise<GameOfLifeWorkerResult> {\n\t\tthis.load();\n\n\t\tthis.worker.postMessage({\n\t\t\ttype: 'deleteOrCreateCell',\n\t\t\tpayload: {\n\t\t\t\ttypeAction: typeAction,\n\t\t\t\tkey: key\n\t\t\t}\n\t\t});\n\n\t\tconst resultWorker = new Promise<GameOfLifeWorkerResult>((resolve, reject) => {\n\t\t\tthis.worker.onmessage = (event) => {\n\t\t\t\tconst message = event.data;\n\n\t\t\t\tthis.loadComplete();\n\n\t\t\t\tif (message.type === 'result: deleteOrCreateCell') {\n\t\t\t\t\tconst data: GameOfLifeWorkerResult = message.data;\n\t\t\t\t\tresolve(data);\n\t\t\t\t}\n\n\t\t\t\treject(false);\n\t\t\t};\n\t\t});\n\n\t\treturn resultWorker;\n\t}\n\n\tprivate generateCellByClick = (event: MouseEvent, moved: boolean = false): void => {\n\t\tif (this.played === true) {\n\t\t\treturn;\n\t\t}\n\t\tconst rect = this.nodes.canvasNode.getBoundingClientRect();\n\t\tconst x = event.clientX - rect.left;\n\t\tconst y = event.clientY - rect.top;\n\t\tconst col = Math.floor(x / this.cellSize);\n\t\tconst row = Math.floor(y / this.cellSize);\n\t\tconst key = this.getKey(row, col);\n\n\t\tconst isCellAlive = this.field.get(key);\n\n\t\tconst deleteCell = () => {\n\t\t\tthis.activeCells--;\n\t\t\tthis.field.set(key, false);\n\t\t\tthis.sendWorkerDeleteOrCreateCell('delete', key).then();\n\t\t};\n\n\t\tconst createCell = () => {\n\t\t\tthis.activeCells++;\n\t\t\tthis.field.set(key, true);\n\t\t\tthis.sendWorkerDeleteOrCreateCell('create', key).then();\n\t\t}\n\n\t\tif (isCellAlive === false && moved === true) {\n\t\t\tcreateCell();\n\t\t} else if (isCellAlive === false && moved === false) {\n\t\t\tcreateCell();\n\t\t} else if (isCellAlive === true && moved === false) {\n\t\t\tdeleteCell();\n\t\t}\n\n\t\tthis.renderPopulation();\n\t\tthis.drawField();\n\t}\n\n\tprivate initCalcSpeed(): void {\n\t\tconst max = Number(this.nodes.popupSpeedRangeNode.max);\n\t\tconst min = Number(this.nodes.popupSpeedRangeNode.min);\n\n\t\tconst speedPercent = (this.speed - 1) / 9;\n\t\tconst value = min + (speedPercent * (max - min));\n\n\t\tthis.nodes.popupSpeedRangeNode.value = String(value);\n\t\tthis.nodes.popupSpeedInfoNode.textContent = String(this.speed);\n\t}\n\n\tprivate calcSpeedInputChange = (): void => {\n\t\tconst lastGameState = this.played;\n\t\tthis.stopGame();\n\n\t\tconst currentVal = this.nodes.popupSpeedRangeNode.valueAsNumber;\n\t\tconst max = Number(this.nodes.popupSpeedRangeNode.max);\n\t\tconst min = Number(this.nodes.popupSpeedRangeNode.min);\n\n\t\tconst end = max - min;\n\t\tconst currentValMod = currentVal - min;\n\n\t\tconst currentValPercent = currentValMod / end;\n\t\tconst newSpeed = Number(((currentValPercent * 9) + 1).toFixed(1));\n\t\tthis.speed = newSpeed;\n\n\t\tthis.nodes.popupSpeedInfoNode.textContent = String(this.speed);\n\n\t\tif (this.localStorageUse) this.setLocalStorage('speed', this.speed);\n\n\t\tif (lastGameState === true) this.startGame();\n\t}\n\n\tprivate useLocalStorage(): void {\n\t\tconst lastLocalStorage = this.getLocalStorage();\n\n\t\tif (lastLocalStorage.random !== undefined) {\n\t\t\tthis.random = lastLocalStorage.random;\n\t\t}\n\n\t\tif (lastLocalStorage.speed !== undefined) {\n\t\t\tthis.speed = lastLocalStorage.speed;\n\t\t}\n\n\t\tif (lastLocalStorage.rows !== undefined) {\n\t\t\tthis.rows = lastLocalStorage.rows;\n\t\t}\n\n\t\tif (lastLocalStorage.cols !== undefined) {\n\t\t\tthis.cols = lastLocalStorage.cols;\n\t\t}\n\n\t\tif (lastLocalStorage.popupHidden !== undefined) {\n\t\t\tthis.popupHidden = lastLocalStorage.popupHidden;\n\t\t}\n\t}\n\n\tprivate clear = (): void => {\n\t\tif (this.loading === true) false;\n\n\t\tthis.stopGame();\n\t\tthis.gameTime = 0;\n\t\tthis.gameLastTime = 0;\n\t\tthis.gameStartTime = 0;\n\t\tthis.cycles = 0;\n\n\t\tthis.disableInputs();\n\n\t\tthis.sendWorkerInitFields({\n\t\t\trandom: false,\n\t\t\trows: this.rows,\n\t\t\tcols: this.cols\n\t\t}).then(data => {\n\t\t\tthis.drawField();\n\t\t\tthis.renderTime();\n\t\t\tthis.renderPopup();\n\t\t\tthis.enableInputs();\n\t\t});\n\t}\n\n\tprivate generateNewFields = (): void => {\n\t\tif (this.loading === true) false;\n\n\t\tthis.sendWorkerInitFields({\n\t\t\trandom: true,\n\t\t\trows: this.rows,\n\t\t\tcols: this.cols\n\t\t}).then(data => {\n\t\t\tthis.cycles = 0;\n\t\t\tthis.drawField();\n\t\t\tthis.renderPopup();\n\t\t});\n\t}\n\n\tprivate initNodes(injectedNode: HTMLElement): void {\n\n\t\tinjectedNode.innerHTML = `\n\t\t\t<div class=\"wrapper\">\n\t\t\t\t<div class=\"wrapper-canvas\">\n\t\t\t\t\t<canvas class=\"canvas\"></canvas>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"popup\">\n\t\t\t\t\t<div class=\"popup__item popup__play\">Play</div>\n\t\t\t\t\t<div class=\"popup__item popup__pause\">Пауза</div>\n\t\t\t\t\t<div class=\"popup__item popup__clear\">Очистить</div>\n\t\t\t\t\t<div class=\"popup__item popup__step\">Шаг</div>\n\t\t\t\t\t<div class=\"popup__item popup__generate\">Сгенерировать</div>\n\t\t\t\t\t<label class=\"popup__item popup__random-checkbox-item\">\n\t\t\t\t\t\t<input type=\"checkbox\" class=\"popup__random-checkbox\">\n\t\t\t\t\t\t<span>Рандом</span>\n\t\t\t\t\t</label>\n\t\t\t\t\t<div class=\"popup__item\">\n\t\t\t\t\t\tВремя:\n\t\t\t\t\t\t<span class=\"popup__time\">0.0</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"popup__item\">Поколение: <span class=\"popup__cycles\">0</span></div>\n\t\t\t\t\t<div class=\"popup__item\">Население: <span class=\"popup__population\">0</span></div>\n\t\t\t\t\t<div class=\"popup__item\">\n\t\t\t\t\t\t<span>Скорость: </span>\n\t\t\t\t\t\t<span class=\"popup__speed-info\">1</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"popup__item\">\n\t\t\t\t\t\t<input class=\"popup__speed-range\" type=\"range\" min=\"0\" max=\"100\" value=\"50\">\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"popup__item popup__item_inputs\">\n\t\t\t\t\t\t<input type=\"number\" class=\"popup__rows popup__inputs\" placeholder=\"rows\" min=\"0\" max=\"2000\">\n\t\t\t\t\t\t<input type=\"number\" class=\"popup__cols popup__inputs\" placeholder=\"cols\" min=\"0\" max=\"2000\">\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"popup__item popup__close\">Скрыть</div>\n\n\t\t\t\t\t<div class=\"popup__item popup__load\">Загрузка</div>\n\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t`;\n\n\t\tconst popupNode = this._querySelector<HTMLElement>(injectedNode, '.popup');\n\t\tconst canvasNode = this._querySelector<HTMLCanvasElement>(injectedNode, '.canvas');\n\t\tconst wrapperCanvasNode = this._querySelector<HTMLElement>(injectedNode, '.wrapper-canvas');\n\t\tconst popupPlayNode = this._querySelector<HTMLElement>(popupNode, '.popup__play');\n\t\tconst popupPauseNode = this._querySelector<HTMLElement>(popupNode, '.popup__pause');\n\t\tconst popupTimeNode = this._querySelector<HTMLElement>(popupNode, '.popup__time');\n\t\tconst popupPopulationNode = this._querySelector<HTMLElement>(popupNode, '.popup__population');\n\t\tconst popupCyclesNode = this._querySelector<HTMLElement>(popupNode, '.popup__cycles');\n\t\tconst popupGenerateNode = this._querySelector<HTMLElement>(popupNode, '.popup__generate');\n\t\tconst popupRandomCheckboxNode = this._querySelector<HTMLInputElement>(popupNode, '.popup__random-checkbox');\n\t\tconst popupSpeedRangeNode = this._querySelector<HTMLInputElement>(popupNode, '.popup__speed-range');\n\t\tconst popupSpeedInfoNode = this._querySelector<HTMLElement>(popupNode, '.popup__speed-info');\n\t\tconst popupClearNode = this._querySelector<HTMLElement>(popupNode, '.popup__clear');\n\t\tconst popupStepNode = this._querySelector<HTMLElement>(popupNode, '.popup__step');\n\t\tconst popupLoadNode = this._querySelector<HTMLElement>(popupNode, '.popup__load');\n\t\tconst popupInputRowsNode = this._querySelector<HTMLInputElement>(popupNode, '.popup__rows');\n\t\tconst popupInputColsNode = this._querySelector<HTMLInputElement>(popupNode, '.popup__cols');\n\t\tconst popupCloseNode = this._querySelector<HTMLInputElement>(popupNode, '.popup__close');\n\n\t\tthis.nodes = {\n\t\t\tcanvasNode: canvasNode,\n\t\t\tpopupNode: popupNode,\n\t\t\tpopupPlayNode: popupPlayNode,\n\t\t\tpopupPauseNode: popupPauseNode,\n\t\t\tpopupTimeNode: popupTimeNode,\n\t\t\tpopupPopulationNode: popupPopulationNode,\n\t\t\tpopupCyclesNode: popupCyclesNode,\n\t\t\tpopupGenerateNode: popupGenerateNode,\n\t\t\twrapperCanvasNode: wrapperCanvasNode,\n\t\t\tpopupRandomCheckboxNode: popupRandomCheckboxNode,\n\t\t\tpopupSpeedRangeNode: popupSpeedRangeNode,\n\t\t\tpopupSpeedInfoNode: popupSpeedInfoNode,\n\t\t\tpopupClearNode: popupClearNode,\n\t\t\tpopupStepNode: popupStepNode,\n\t\t\tpopupLoadNode: popupLoadNode,\n\t\t\tpopupInputRowsNode: popupInputRowsNode,\n\t\t\tpopupInputColsNode: popupInputColsNode,\n\t\t\tpopupCloseNode: popupCloseNode\n\t\t}\n\t}\n\n\tprivate _querySelector<T = Element>(parentNode: Element | Document, selector: string): T {\n\t\tconst node = parentNode.querySelector(selector);\n\t\tif (node === null) {\n\t\t\tthrow new Error(`GameOfLife: элемент с классом ${selector} не найден`);\n\t\t}\n\t\treturn node as T;\n\t}\n\n\n\tprivate resizeAndDraw = (): void => {\n\t\tthis.setCanvasSize();\n\t\tthis.drawField();\n\t}\n\n\tprivate setColorCell = (): void => {\n\t\tthis.colorCell = getComputedStyle(document.documentElement).getPropertyValue('--color');\n\t}\n\n\tprivate setColorCellAndDraw = (): void => {\n\t\tthis.setColorCell();\n\t\tthis.drawField();\n\t}\n\n\tprivate setCanvasSize = (): void => {\n\t\tconst width = this.nodes.wrapperCanvasNode.offsetWidth;\n\t\tconst height = this.nodes.wrapperCanvasNode.offsetHeight;\n\n\t\tconst aspectRatio = this.cols / this.rows;\n\n\t\tconst canvasWidth = Math.min(width, height * aspectRatio);\n\t\tconst canvasHeight = canvasWidth / aspectRatio;\n\n\t\tthis.cellSize = canvasWidth / this.cols;\n\n\t\tconst xPadding = (width - canvasWidth) / 2;\n\t\tconst yPadding = (height - canvasHeight) / 2;\n\n\t\tthis.nodes.canvasNode.width = canvasWidth;\n\t\tthis.nodes.canvasNode.height = canvasHeight;\n\n\t\tthis.nodes.wrapperCanvasNode.style.padding = `${yPadding}px ${xPadding}px`;\n\t}\n\n\tprivate getKey(row: number, col: number): string {\n\t\treturn `${row}-${col}`;\n\t}\n\n\tprivate drawField(): void {\n\t\tthis.load();\n\n\t\tthis.ctx.clearRect(0, 0, this.nodes.canvasNode.width, this.nodes.canvasNode.height);\n\t\tconst cellSize = this.cellSize;\n\n\t\tthis.ctx.fillStyle = this.colorCell;\n\n\t\tfor (let i = 0; i < this.rows; i++) {\n\t\t\tfor (let j = 0; j < this.cols; j++) {\n\t\t\t\tconst key = this.getKey(i, j);\n\t\t\t\tif (this.field.get(key)) {\n\t\t\t\t\tthis.ctx.fillRect(j * cellSize, i * cellSize, cellSize, cellSize);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.loadComplete();\n\t}\n\n\tprivate sendWorkerUpdateField(): Promise<GameOfLifeWorkerResult> {\n\t\tthis.load();\n\n\t\tthis.worker.postMessage({\n\t\t\ttype: 'updateField',\n\t\t\tpayload: {}\n\t\t});\n\n\t\tconst resultWorker = new Promise<GameOfLifeWorkerResult>((resolve, reject) => {\n\t\t\tthis.worker.onmessage = (event) => {\n\t\t\t\tconst message = event.data;\n\n\t\t\t\tthis.loadComplete();\n\n\t\t\t\tif (message.type === 'result: updateField') {\n\t\t\t\t\tconst data: GameOfLifeWorkerResult = message.data;\n\t\t\t\t\tconst { activeCells, field, buffer } = data;\n\n\t\t\t\t\tthis.activeCells = activeCells;\n\t\t\t\t\tthis.field = field;\n\t\t\t\t\tthis.buffer = buffer;\n\n\t\t\t\t\tresolve(data);\n\t\t\t\t}\n\n\t\t\t\treject(false);\n\t\t\t};\n\t\t});\n\n\t\treturn resultWorker;\n\t}\n\n\tprivate renderPopup(): void {\n\t\tthis.renderPopulation();\n\t\tthis.renderRandom();\n\t\tthis.nodes.popupCyclesNode.textContent = String(this.cycles);\n\t\tthis.nodes.popupRandomCheckboxNode.checked = this.random;\n\t}\n\n\tprivate renderTime(): void {\n\t\tlet gameTime = Date.now() - this.gameStartTime + this.gameLastTime;\n\t\tif (this.gameStartTime === 0) gameTime = 0;\n\t\tthis.gameTime = gameTime;\n\n\t\tthis.nodes.popupTimeNode.textContent = (this.gameTime / 1000).toFixed(1);\n\t}\n\n\tprivate renderRandom(): void {\n\t\tif (this.random === true) {\n\t\t\tthis.nodes.popupGenerateNode.classList.add('popup__generate_active');\n\t\t} else {\n\t\t\tthis.nodes.popupGenerateNode.classList.remove('popup__generate_active');\n\t\t}\n\t}\n\n\tprivate renderPopulation(): void {\n\t\tthis.nodes.popupPopulationNode.textContent = String(this.activeCells);\n\t}\n\n\tprivate stepGame = (): Promise<GameOfLifeWorkerResult> | undefined => {\n\t\tif (this.loading === true) return;\n\n\t\treturn this.sendWorkerUpdateField()\n\t\t.then(data => {\n\t\t\tthis.drawField();\n\t\t\tthis.cycles = this.cycles + 1;\n\t\t\tthis.renderPopup();\n\t\t\treturn data;\n\t\t});\n\t}\n\n\tprivate startGame(): void {\n\t\tthis.disableInputs();\n\t\tthis.played = true;\n\t\tthis.gameStartTime = Date.now();\n\t\tthis.animationObj = requestInterval(this.stepGame, this.interval / this.speed ** 1.5);\n\t\tthis.animationTimeId = requestInterval(this.stepAnimationRenderTime);\n\t}\n\n\tprivate stepAnimationRenderTime = () => {\n\t\tthis.renderTime();\n\t}\n\n\tpublic stopGame(): void {\n\t\tif (this.played === false) return;\n\t\tthis.played = false;\n\t\tthis.gameLastTime = this.gameTime;\n\t\tcancelAnimationFrame(this.animationObj.id);\n\t\tcancelAnimationFrame(this.animationTimeId.id);\n\t\tthis.enableInputs();\n\t}\n\n\tprivate getLocalStorage(): GameOfLifeLocalStorage {\n\t\treturn JSON.parse(localStorage.getItem('life') || '{}');\n\t}\n\n\tprivate setLocalStorage<T>(key: string, value: T): void {\n\t\tconst lastLocalStorage = this.getLocalStorage();\n\n\t\tlastLocalStorage[key] = value;\n\n\t\tlocalStorage.setItem('life', JSON.stringify(lastLocalStorage));\n\t}\n\n}\n\n\n","export function requestInterval(fn: () => void, interval: number = 0): {id: number} {\n  const obj = {\n    id: 0,\n  };\n  let start = Date.now();\n\n  const animate = () => {\n\t\tif (interval === 0) {\n\t\t\tfn();\n\t\t\tobj.id = requestAnimationFrame(animate);\n\t\t\treturn;\n\t\t}\n\n\n    const now = Date.now();\n    const delta = now - start;\n\n    if (delta >= interval) {\n      fn();\n      start = now - (delta % interval);\n    }\n\n    obj.id = requestAnimationFrame(animate);\n  };\n\n  obj.id = requestAnimationFrame(animate);\n\n  return obj;\n}\n","export function restrictInputValue(input: HTMLInputElement, min: number, max: number) {\n\tlet value = parseInt(input.value);\n\n\tif (isNaN(value)) {\n\t\tvalue = min;\n\t} else if (value < min) {\n\t\tvalue = min;\n\t} else if (value > max) {\n\t\tvalue = max;\n\t}\n\n\tinput.value = value.toString();\n\n\treturn value;\n}\n","let workerURL = require('./helpers/get-worker-url');\nlet url = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"3aufl\"));\nmodule.exports = workerURL(url.toString(), url.origin, true);","\"use strict\";\n\nmodule.exports = function (workerUrl, origin, isESM) {\n  if (origin === self.location.origin) {\n    // If the worker bundle's url is on the same origin as the document,\n    // use the worker bundle's own url.\n    return workerUrl;\n  } else {\n    // Otherwise, create a blob URL which loads the worker bundle with `importScripts`.\n    var source = isESM ? 'import ' + JSON.stringify(workerUrl) + ';' : 'importScripts(' + JSON.stringify(workerUrl) + ');';\n    return URL.createObjectURL(new Blob([source], {\n      type: 'application/javascript'\n    }));\n  }\n};"],"names":["$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","$parcel$global","globalThis","self","window","global","$parcel$modules","$parcel$inits","parcelRequire","$20713660892d2e93$export$281c8d11e819ea94","fn","interval","obj","id","start","Date","now","animate","requestAnimationFrame","delta","$d7cbbf251e962942$export$7913c0f032ea53bb","input","min","max","value","parseInt","isNaN","toString","exports","init","module","call","err","Error","code","register","$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","pairs","keys","i","length","resolved","JSON","parse","$bf724c28c7332a51$exports","$56b621a6dd25b2cb$exports","workerUrl","origin","isESM","location","source","stringify","URL","createObjectURL","Blob","type","$bf724c28c7332a51$var$url","resolve","url","$b112110fd2ad031c$var$injectedNode","document","querySelector","constructor","injectedNode","cellsCountX","cellsCountY","random","speed","localStorageUse","popupHidden","cycles","played","gameTime","gameStartTime","gameLastTime","activeCells","isDragging","isRealDragging","worker","Worker","loading","focusedInput","togglePopup","setLocalStorage","nodes","popupNode","classList","add","popupCloseNode","textContent","remove","generateCellByClick","event","moved","rect","canvasNode","getBoundingClientRect","x","clientX","left","y","clientY","top","col","Math","floor","cellSize","row","key","getKey","isCellAlive","field","createCell","sendWorkerDeleteOrCreateCell","then","deleteCell","renderPopulation","drawField","calcSpeedInputChange","lastGameState","stopGame","currentVal","popupSpeedRangeNode","valueAsNumber","Number","newSpeed","currentValPercent","currentValMod","toFixed","popupSpeedInfoNode","String","startGame","clear","disableInputs","sendWorkerInitFields","rows","cols","data","renderTime","renderPopup","enableInputs","generateNewFields","resizeAndDraw","setCanvasSize","setColorCell","colorCell","getComputedStyle","documentElement","getPropertyValue","setColorCellAndDraw","width","wrapperCanvasNode","offsetWidth","height","offsetHeight","aspectRatio","canvasWidth","canvasHeight","style","padding","stepGame","sendWorkerUpdateField","stepAnimationRenderTime","initNodes","ctx","getContext","useLocalStorage","initCalcSpeed","initInputNodes","initPopupHidden","buffer","initEventListeners","popupInputRowsNode","popupInputColsNode","disabled","focus","load","postMessage","payload","resultWorker","Promise","reject","onmessage","message","loadComplete","popupLoadNode","addEventListener","matchMediaDark","matchMedia","popupPauseNode","popupPlayNode","popupGenerateNode","button","clickOnPopupBool","isClickOnElement","popupRandomCheckboxNode","renderRandom","popupClearNode","popupStepNode","newRows","resizeFieldRows","newCols","resizeFieldCols","sendWorkerResizeField","catch","element","target","currentNode","parentElement","typeAction","speedPercent","lastLocalStorage","getLocalStorage","undefined","innerHTML","_querySelector","popupTimeNode","popupPopulationNode","popupCyclesNode","parentNode","selector","node","clearRect","fillStyle","j","fillRect","checked","animationObj","animationTimeId","cancelAnimationFrame","localStorage","getItem","setItem"],"version":3,"file":"index.452ded27.js.map"}