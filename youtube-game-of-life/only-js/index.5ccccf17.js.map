{"mappings":"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","sources":["youtube-game-of-life/only-js/scripts/functions/request-interval.js","youtube-game-of-life/only-js/scripts/functions/restrict-input.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-3f478013e046a8b7.js","node_modules/@parcel/runtime-js/lib/helpers/get-worker-url.js","node_modules/@parcel/runtime-js/lib/runtime-694e44035c7a1ebe.js","youtube-game-of-life/only-js/scripts/index.js","youtube-game-of-life/only-js/scripts/game-of-life.js"],"sourcesContent":["export function requestInterval(fn, interval = 0) {\n  const obj = {\n    id: 0,\n  };\n  let start = Date.now();\n\n  const animate = () => {\n\t\tif (interval === 0) {\n\t\t\tfn();\n\t\t\tobj.id = requestAnimationFrame(animate);\n\t\t\treturn;\n\t\t}\n\n\n    const now = Date.now();\n    const delta = now - start;\n\n    if (delta >= interval) {\n      fn();\n      start = now - (delta % interval);\n    }\n\n    obj.id = requestAnimationFrame(animate);\n  };\n\n  obj.id = requestAnimationFrame(animate);\n\n  return obj;\n}\n","export function restrictInputValue(input, min, max) {\n\tlet value = parseInt(input.value);\n\n\tif (isNaN(value)) {\n\t\tvalue = min;\n\t} else if (value < min) {\n\t\tvalue = min;\n\t} else if (value > max) {\n\t\tvalue = max;\n\t}\n\n\tinput.value = value.toString();\n\n\treturn value;\n}\n","\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"4j3bX\\\":\\\"index.5ccccf17.js\\\",\\\"h7bGy\\\":\\\"worker-game-of-life-logic.ea43ae75.js\\\"}\"));","\"use strict\";\n\nmodule.exports = function (workerUrl, origin, isESM) {\n  if (origin === self.location.origin) {\n    // If the worker bundle's url is on the same origin as the document,\n    // use the worker bundle's own url.\n    return workerUrl;\n  } else {\n    // Otherwise, create a blob URL which loads the worker bundle with `importScripts`.\n    var source = isESM ? 'import ' + JSON.stringify(workerUrl) + ';' : 'importScripts(' + JSON.stringify(workerUrl) + ');';\n    return URL.createObjectURL(new Blob([source], {\n      type: 'application/javascript'\n    }));\n  }\n};","let workerURL = require('./helpers/get-worker-url');\nlet url = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"h7bGy\"));\nmodule.exports = workerURL(url.toString(), url.origin, true);","import { GameOfLife } from \"./game-of-life\";\n\nconst injectedNode = document.querySelector('.injected-game-life');\n\nif (injectedNode === null) {\n\tthrow new Error('injectedNode не найден');\n}\n\nconst game = new GameOfLife({\n\tcellsCountX: 100,\n\tcellsCountY: 100,\n\trandom: false,\n\tspeed: 1,\n\tlocalStorageUse: true,\n\tpopupHidden: false,\n\tinjectedNode: injectedNode\n});\n","import { requestInterval } from \"./functions/request-interval\";\nimport { restrictInputValue } from \"./functions/restrict-input\";\n\nexport class GameOfLife {\n\tctx;\n\trows;\n\tcols;\n\tcellSize;\n\tfield;\n\tbuffer;\n\tcolorCell;\n\tanimationObj;\n\tnodes;\n\tcycles = 0;\n\tplayed = false;\n\tinterval = 500;\n\tgameTime = 0;\n\tgameStartTime = 0;\n\tgameLastTime = 0;\n\trandom = false;\n\tspeed = 0;\n\tactiveCells = 0;\n\tlocalStorageUse = false;\n\tisDragging = false;\n\tisRealDragging = false;\n\tanimationTimeId;\n\tworker = new Worker(new URL('workers/worker-game-of-life-logic.js', import.meta.url));\n\tloading = false;\n\tfocusedInput = null;\n\tpopupHidden = false;\n\n\tconstructor({ injectedNode, cellsCountX, cellsCountY, random, speed, localStorageUse, popupHidden }) {\n\t\tif (speed < 1) {\n\t\t\tthrow new Error('GameOfLife: speed не может быть меньше 1');\n\t\t}\n\t\tif (speed > 10) {\n\t\t\tthrow new Error('GameOfLife: speed не может быть больше 10');\n\t\t}\n\n\t\tthis.rows = cellsCountX;\n\t\tthis.cols = cellsCountY;\n\t\tthis.random = random;\n\t\tthis.speed = speed;\n\t\tthis.localStorageUse = localStorageUse;\n\t\tthis.popupHidden = popupHidden;\n\n\t\tthis.initNodes(injectedNode);\n\t\tthis.ctx = this.nodes.canvasNode.getContext(\"2d\");\n\t\tif (this.localStorageUse) this.useLocalStorage();\n\t\tthis.initCalcSpeed();\n\t\tthis.setCanvasSize();\n\t\tthis.setColorCell();\n\t\tthis.initInputNodes();\n\t\tthis.initPopupHidden();\n\n\t\tthis.sendWorkerInitFields({\n\t\t\trandom: this.random,\n\t\t\trows: this.rows,\n\t\t\tcols: this.cols\n\t\t})\n\t\t.then(({ activeCells, field, buffer }) => {\n\t\t\tthis.initEventListeners();\n\t\t\tthis.drawField();\n\t\t\tthis.renderPopup();\n\t\t});\n\t}\n\n\tinitInputNodes() {\n\t\tthis.nodes.popupInputRowsNode.value = String(this.rows);\n\t\tthis.nodes.popupInputColsNode.value = String(this.cols);\n\t}\n\n\tinitPopupHidden() {\n\t\tthis.togglePopup(this.popupHidden);\n\t}\n\n\tdisableInputs() {\n\t\tthis.nodes.popupInputRowsNode.disabled = true;\n\t\tthis.nodes.popupInputColsNode.disabled = true;\n\t}\n\n\tenableInputs() {\n\t\tthis.nodes.popupInputRowsNode.disabled = false;\n\t\tthis.nodes.popupInputColsNode.disabled = false;\n\n\t\tif (this.focusedInput !== null) {\n\t\t\tthis.focusedInput.focus();\n\t\t\tthis.focusedInput = null;\n\t\t}\n\t}\n\n\tsendWorkerInitFields({\n\t\trandom, rows, cols\n\t}) {\n\n\t\tthis.load();\n\t\tthis.disableInputs();\n\n\t\tthis.worker.postMessage({\n\t\t\ttype: 'initFields',\n\t\t\tpayload: {\n\t\t\t\trandom: random,\n\t\t\t\trows: rows,\n\t\t\t\tcols: cols\n\t\t\t}\n\t\t});\n\n\t\tconst resultWorker = new Promise((resolve, reject) => {\n\t\t\tthis.worker.onmessage = (event) => {\n\t\t\t\tconst message = event.data;\n\n\t\t\t\tthis.loadComplete();\n\t\t\t\tthis.enableInputs();\n\n\t\t\t\tif (message.type === 'result: initFields') {\n\t\t\t\t\tconst data = message.data;\n\t\t\t\t\tconst { activeCells, field, buffer } = data;\n\n\t\t\t\t\tthis.activeCells = activeCells;\n\t\t\t\t\tthis.field = field;\n\t\t\t\t\tthis.buffer = buffer;\n\n\t\t\t\t\tresolve(data);\n\t\t\t\t}\n\n\t\t\t\treject(false);\n\t\t\t};\n\t\t});\n\n\t\treturn resultWorker;\n\t}\n\n\tload() {\n\t\tthis.loading = true;\n\t\tthis.nodes.popupLoadNode.classList.add('popup__load_active');\n\t\tthis.nodes.popupNode.classList.add('popup_load');\n\t}\n\n\tloadComplete() {\n\t\tthis.loading = false;\n\t\tthis.nodes.popupLoadNode.classList.remove('popup__load_active');\n\t\tthis.nodes.popupNode.classList.remove('popup_load');\n\t}\n\n\tinitEventListeners() {\n\t\twindow.addEventListener('resize', this.resizeAndDraw);\n\t\tconst matchMediaDark = window.matchMedia('(prefers-color-scheme: dark)');\n\n\t\tmatchMediaDark.addEventListener('change', this.setColorCellAndDraw);\n\n\t\tthis.nodes.popupPauseNode.addEventListener('click', () => {\n\t\t\tif (this.played === false) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.stopGame();\n\t\t});\n\n\t\tthis.nodes.popupPlayNode.addEventListener('click', () => {\n\t\t\tif (this.played === true) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.startGame();\n\t\t});\n\n\t\tthis.nodes.popupGenerateNode.addEventListener('click', this.generateNewFields);\n\n\t\tthis.nodes.canvasNode.addEventListener('pointerdown', (event) => {\n\t\t\tif (this.loading === true) return;\n\t\t\tif (event.button === 2 || event.button === 1) return false; // Если это правая или средняя кнопка мыши, это не тот клик\n\t\t\tthis.isDragging = true;\n\t\t\tthis.isRealDragging = false;\n\t\t});\n\n\t\tthis.nodes.canvasNode.addEventListener('pointermove', (event) => {\n\t\t\tif (event.button === 2 || event.button === 1) return false; // Если это правая или средняя кнопка мыши, это не тот клик\n\t\t\tif (this.isDragging === true && this.loading === false) {\n\t\t\t\tthis.isRealDragging = true;\n\t\t\t\tthis.generateCellByClick(event, true)\n\t\t\t};\n\t\t});\n\n\t\tdocument.addEventListener('pointerup', (event) => {\n\t\t\tif (event.button === 2 || event.button === 1) return false; // Если это правая или средняя кнопка мыши, это не тот клик\n\t\t\tconst clickOnPopupBool = this.isClickOnElement(event, this.nodes.popupNode);\n\t\t\tif (clickOnPopupBool === true) return;\n\t\t\tif (this.isRealDragging === false && this.loading === false) this.generateCellByClick(event, false);\n\n\t\t\tthis.isDragging = false;\n\t\t\tthis.isRealDragging = false;\n\t\t});\n\n\t\tthis.nodes.popupRandomCheckboxNode.addEventListener('input', () => {\n\t\t\tthis.random = !this.random;\n\t\t\tif (this.localStorageUse) this.setLocalStorage('random', this.random);\n\t\t\tthis.renderRandom();\n\t\t});\n\n\t\tthis.nodes.popupSpeedRangeNode.addEventListener('input', this.calcSpeedInputChange);\n\t\tthis.nodes.popupClearNode.addEventListener('click', this.clear);\n\n\t\tthis.nodes.popupStepNode.addEventListener('click', () => {\n\t\t\tthis.disableInputs();\n\t\t\tthis.stepGame()?.then(data => {\n\t\t\t\tthis.enableInputs();\n\t\t\t});\n\t\t});\n\n\t\tthis.nodes.popupInputRowsNode.addEventListener('input', () => {\n\t\t\tconst newRows = restrictInputValue(this.nodes.popupInputRowsNode, 0, 2000);\n\t\t\tif (this.localStorageUse) this.setLocalStorage('rows', newRows);\n\n\t\t\tthis.focusedInput = this.nodes.popupInputRowsNode;\n\t\t\tthis.resizeFieldRows(newRows);\n\t\t});\n\n\t\tthis.nodes.popupInputColsNode.addEventListener('input', () => {\n\t\t\tconst newCols = restrictInputValue(this.nodes.popupInputColsNode, 0, 2000);\n\t\t\tif (this.localStorageUse) this.setLocalStorage('cols', newCols);\n\n\t\t\tthis.focusedInput = this.nodes.popupInputColsNode;\n\t\t\tthis.resizeFieldCols(newCols);\n\t\t});\n\n\t\tthis.nodes.popupCloseNode.addEventListener('click', () => {\n\t\t\tthis.popupHidden = !this.popupHidden;\n\t\t\tthis.togglePopup(this.popupHidden);\n\t\t});\n\t}\n\n\ttogglePopup = (popupHidden) => {\n\t\tif (this.localStorageUse === true) this.setLocalStorage('popupHidden', this.popupHidden);\n\n\t\tif (this.popupHidden === true) {\n\t\t\tthis.nodes.popupNode.classList.add('popup_hidden');\n\t\t\tthis.nodes.popupCloseNode.textContent = 'Открыть';\n\t\t} else {\n\t\t\tthis.nodes.popupNode.classList.remove('popup_hidden');\n\t\t\tthis.nodes.popupCloseNode.textContent = 'Скрыть';\n\t\t}\n\t}\n\n\tresizeFieldRows(newRows) {\n\t\tif (this.loading === true) return;\n\n\t\tthis.sendWorkerResizeField(newRows, this.cols, this.random)\n\t\t.then((data) => {\n\t\t\tthis.setCanvasSize();\n\t\t\tthis.drawField();\n\t\t\tthis.renderTime();\n\t\t\tthis.renderPopup();\n\t\t});\n\t}\n\n\tresizeFieldCols(newCols) {\n\t\tif (this.loading === true) return;\n\n\t\tthis.sendWorkerResizeField(this.rows, newCols, this.random)\n\t\t.then((data) => {\n\t\t\tthis.setCanvasSize();\n\t\t\tthis.drawField();\n\t\t\tthis.renderTime();\n\t\t\tthis.renderPopup();\n\t\t});\n\t}\n\n\tsendWorkerResizeField(newRows, newCols, random) {\n\t\tthis.load();\n\t\tthis.disableInputs();\n\n\t\tthis.worker.postMessage({\n\t\t\ttype: 'resizeField',\n\t\t\tpayload: {\n\t\t\t\tnewRows: newRows,\n\t\t\t\tnewCols: newCols,\n\t\t\t\trandom: random\n\t\t\t}\n\t\t});\n\n\t\tconst resultWorker = new Promise((resolve, reject) => {\n\t\t\tthis.worker.onmessage = (event) => {\n\t\t\t\tconst message = event.data;\n\n\t\t\t\tthis.loadComplete();\n\t\t\t\tthis.enableInputs();\n\n\n\t\t\t\tif (message.type === 'result: resizeField') {\n\t\t\t\t\tconst data = message.data;\n\t\t\t\t\tconst { field, buffer, activeCells, rows, cols } = data;\n\n\t\t\t\t\tthis.field = field;\n\t\t\t\t\tthis.buffer = buffer;\n\t\t\t\t\tthis.activeCells = activeCells;\n\t\t\t\t\tthis.rows = rows;\n\t\t\t\t\tthis.cols = cols;\n\n\t\t\t\t\tresolve(data);\n\t\t\t\t}\n\n\t\t\t\treject(false);\n\t\t\t};\n\t\t}).catch(() => {});\n\n\t\treturn resultWorker;\n\t}\n\n\tisClickOnElement(event, element) {\n\t\tconst target = event.target; // Получаем целевой элемент клика\n\n\t\t// Проверяем, является ли целевой элемент или его родительские элементы равным заданному элементу\n\t\tlet currentNode = target;\n\t\twhile (currentNode != null) {\n\t\t\tif (currentNode === element) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tcurrentNode = currentNode.parentElement;\n\t\t}\n\n\t\t// Если не было найдено совпадений, возвращаем false\n\t\treturn false;\n\t}\n\n\tsendWorkerDeleteOrCreateCell(typeAction, key) {\n\t\tthis.load();\n\n\t\tthis.worker.postMessage({\n\t\t\ttype: 'deleteOrCreateCell',\n\t\t\tpayload: {\n\t\t\t\ttypeAction: typeAction,\n\t\t\t\tkey: key\n\t\t\t}\n\t\t});\n\n\t\tconst resultWorker = new Promise((resolve, reject) => {\n\t\t\tthis.worker.onmessage = (event) => {\n\t\t\t\tconst message = event.data;\n\n\t\t\t\tthis.loadComplete();\n\n\t\t\t\tif (message.type === 'result: deleteOrCreateCell') {\n\t\t\t\t\tconst data = message.data;\n\t\t\t\t\tresolve(data);\n\t\t\t\t}\n\n\t\t\t\treject(false);\n\t\t\t};\n\t\t});\n\n\t\treturn resultWorker;\n\t}\n\n\tgenerateCellByClick = (event, moved = false) => {\n\t\tif (this.played === true) {\n\t\t\treturn;\n\t\t}\n\t\tconst rect = this.nodes.canvasNode.getBoundingClientRect();\n\t\tconst x = event.clientX - rect.left;\n\t\tconst y = event.clientY - rect.top;\n\t\tconst col = Math.floor(x / this.cellSize);\n\t\tconst row = Math.floor(y / this.cellSize);\n\t\tconst key = this.getKey(row, col);\n\n\t\tconst isCellAlive = this.field.get(key);\n\n\t\tconst deleteCell = () => {\n\t\t\tthis.activeCells--;\n\t\t\tthis.field.set(key, false);\n\t\t\tthis.sendWorkerDeleteOrCreateCell('delete', key).then();\n\t\t};\n\n\t\tconst createCell = () => {\n\t\t\tthis.activeCells++;\n\t\t\tthis.field.set(key, true);\n\t\t\tthis.sendWorkerDeleteOrCreateCell('create', key).then();\n\t\t}\n\n\t\tif (isCellAlive === false && moved === true) {\n\t\t\tcreateCell();\n\t\t} else if (isCellAlive === false && moved === false) {\n\t\t\tcreateCell();\n\t\t} else if (isCellAlive === true && moved === false) {\n\t\t\tdeleteCell();\n\t\t}\n\n\t\tthis.renderPopulation();\n\t\tthis.drawField();\n\t}\n\n\tinitCalcSpeed() {\n\t\tconst max = Number(this.nodes.popupSpeedRangeNode.max);\n\t\tconst min = Number(this.nodes.popupSpeedRangeNode.min);\n\n\t\tconst speedPercent = (this.speed - 1) / 9;\n\t\tconst value = min + (speedPercent * (max - min));\n\n\t\tthis.nodes.popupSpeedRangeNode.value = String(value);\n\t\tthis.nodes.popupSpeedInfoNode.textContent = String(this.speed);\n\t}\n\n\tcalcSpeedInputChange = () => {\n\t\tconst lastGameState = this.played;\n\t\tthis.stopGame();\n\n\t\tconst currentVal = this.nodes.popupSpeedRangeNode.valueAsNumber;\n\t\tconst max = Number(this.nodes.popupSpeedRangeNode.max);\n\t\tconst min = Number(this.nodes.popupSpeedRangeNode.min);\n\n\t\tconst end = max - min;\n\t\tconst currentValMod = currentVal - min;\n\n\t\tconst currentValPercent = currentValMod / end;\n\t\tconst newSpeed = Number(((currentValPercent * 9) + 1).toFixed(1));\n\t\tthis.speed = newSpeed;\n\n\t\tthis.nodes.popupSpeedInfoNode.textContent = String(this.speed);\n\n\t\tif (this.localStorageUse) this.setLocalStorage('speed', this.speed);\n\n\t\tif (lastGameState === true) this.startGame();\n\t}\n\n\tuseLocalStorage() {\n\t\tconst lastLocalStorage = this.getLocalStorage();\n\n\t\tif (lastLocalStorage.random !== undefined) {\n\t\t\tthis.random = lastLocalStorage.random;\n\t\t}\n\n\t\tif (lastLocalStorage.speed !== undefined) {\n\t\t\tthis.speed = lastLocalStorage.speed;\n\t\t}\n\n\t\tif (lastLocalStorage.rows !== undefined) {\n\t\t\tthis.rows = lastLocalStorage.rows;\n\t\t}\n\n\t\tif (lastLocalStorage.cols !== undefined) {\n\t\t\tthis.cols = lastLocalStorage.cols;\n\t\t}\n\n\t\tif (lastLocalStorage.popupHidden !== undefined) {\n\t\t\tthis.popupHidden = lastLocalStorage.popupHidden;\n\t\t}\n\t}\n\n\tclear = () => {\n\t\tif (this.loading === true) false;\n\n\t\tthis.stopGame();\n\t\tthis.gameTime = 0;\n\t\tthis.gameLastTime = 0;\n\t\tthis.gameStartTime = 0;\n\t\tthis.cycles = 0;\n\n\t\tthis.disableInputs();\n\n\t\tthis.sendWorkerInitFields({\n\t\t\trandom: false,\n\t\t\trows: this.rows,\n\t\t\tcols: this.cols\n\t\t}).then(data => {\n\t\t\tthis.drawField();\n\t\t\tthis.renderTime();\n\t\t\tthis.renderPopup();\n\t\t\tthis.enableInputs();\n\t\t});\n\t}\n\n\tgenerateNewFields = () => {\n\t\tif (this.loading === true) false;\n\n\t\tthis.sendWorkerInitFields({\n\t\t\trandom: true,\n\t\t\trows: this.rows,\n\t\t\tcols: this.cols\n\t\t}).then(data => {\n\t\t\tthis.cycles = 0;\n\t\t\tthis.drawField();\n\t\t\tthis.renderPopup();\n\t\t});\n\t}\n\n\tinitNodes(injectedNode) {\n\n\t\tinjectedNode.innerHTML = `\n\t\t\t<div class=\"wrapper\">\n\t\t\t\t<div class=\"wrapper-canvas\">\n\t\t\t\t\t<canvas class=\"canvas\"></canvas>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"popup\">\n\t\t\t\t\t<div class=\"popup__item popup__play\">Play</div>\n\t\t\t\t\t<div class=\"popup__item popup__pause\">Пауза</div>\n\t\t\t\t\t<div class=\"popup__item popup__clear\">Очистить</div>\n\t\t\t\t\t<div class=\"popup__item popup__step\">Шаг</div>\n\t\t\t\t\t<div class=\"popup__item popup__generate\">Сгенерировать</div>\n\t\t\t\t\t<label class=\"popup__item popup__random-checkbox-item\">\n\t\t\t\t\t\t<input type=\"checkbox\" class=\"popup__random-checkbox\">\n\t\t\t\t\t\t<span>Рандом</span>\n\t\t\t\t\t</label>\n\t\t\t\t\t<div class=\"popup__item\">\n\t\t\t\t\t\tВремя:\n\t\t\t\t\t\t<span class=\"popup__time\">0.0</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"popup__item\">Поколение: <span class=\"popup__cycles\">0</span></div>\n\t\t\t\t\t<div class=\"popup__item\">Население: <span class=\"popup__population\">0</span></div>\n\t\t\t\t\t<div class=\"popup__item\">\n\t\t\t\t\t\t<span>Скорость: </span>\n\t\t\t\t\t\t<span class=\"popup__speed-info\">1</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"popup__item\">\n\t\t\t\t\t\t<input class=\"popup__speed-range\" type=\"range\" min=\"0\" max=\"100\" value=\"50\">\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"popup__item popup__item_inputs\">\n\t\t\t\t\t\t<input type=\"number\" class=\"popup__rows popup__inputs\" placeholder=\"rows\" min=\"0\" max=\"2000\">\n\t\t\t\t\t\t<input type=\"number\" class=\"popup__cols popup__inputs\" placeholder=\"cols\" min=\"0\" max=\"2000\">\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"popup__item popup__close\">Скрыть</div>\n\n\t\t\t\t\t<div class=\"popup__item popup__load\">Загрузка</div>\n\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t`;\n\n\t\tconst popupNode = this._querySelector(injectedNode, '.popup');\n\t\tconst canvasNode = this._querySelector(injectedNode, '.canvas');\n\t\tconst wrapperCanvasNode = this._querySelector(injectedNode, '.wrapper-canvas');\n\t\tconst popupPlayNode = this._querySelector(popupNode, '.popup__play');\n\t\tconst popupPauseNode = this._querySelector(popupNode, '.popup__pause');\n\t\tconst popupTimeNode = this._querySelector(popupNode, '.popup__time');\n\t\tconst popupPopulationNode = this._querySelector(popupNode, '.popup__population');\n\t\tconst popupCyclesNode = this._querySelector(popupNode, '.popup__cycles');\n\t\tconst popupGenerateNode = this._querySelector(popupNode, '.popup__generate');\n\t\tconst popupRandomCheckboxNode = this._querySelector(popupNode, '.popup__random-checkbox');\n\t\tconst popupSpeedRangeNode = this._querySelector(popupNode, '.popup__speed-range');\n\t\tconst popupSpeedInfoNode = this._querySelector(popupNode, '.popup__speed-info');\n\t\tconst popupClearNode = this._querySelector(popupNode, '.popup__clear');\n\t\tconst popupStepNode = this._querySelector(popupNode, '.popup__step');\n\t\tconst popupLoadNode = this._querySelector(popupNode, '.popup__load');\n\t\tconst popupInputRowsNode = this._querySelector(popupNode, '.popup__rows');\n\t\tconst popupInputColsNode = this._querySelector(popupNode, '.popup__cols');\n\t\tconst popupCloseNode = this._querySelector(popupNode, '.popup__close');\n\n\t\tthis.nodes = {\n\t\t\tcanvasNode: canvasNode,\n\t\t\tpopupNode: popupNode,\n\t\t\tpopupPlayNode: popupPlayNode,\n\t\t\tpopupPauseNode: popupPauseNode,\n\t\t\tpopupTimeNode: popupTimeNode,\n\t\t\tpopupPopulationNode: popupPopulationNode,\n\t\t\tpopupCyclesNode: popupCyclesNode,\n\t\t\tpopupGenerateNode: popupGenerateNode,\n\t\t\twrapperCanvasNode: wrapperCanvasNode,\n\t\t\tpopupRandomCheckboxNode: popupRandomCheckboxNode,\n\t\t\tpopupSpeedRangeNode: popupSpeedRangeNode,\n\t\t\tpopupSpeedInfoNode: popupSpeedInfoNode,\n\t\t\tpopupClearNode: popupClearNode,\n\t\t\tpopupStepNode: popupStepNode,\n\t\t\tpopupLoadNode: popupLoadNode,\n\t\t\tpopupInputRowsNode: popupInputRowsNode,\n\t\t\tpopupInputColsNode: popupInputColsNode,\n\t\t\tpopupCloseNode: popupCloseNode\n\t\t}\n\t}\n\n\t_querySelector(parentNode, selector) {\n\t\tconst node = parentNode.querySelector(selector);\n\t\tif (node === null) {\n\t\t\tthrow new Error(`GameOfLife: элемент с классом ${selector} не найден`);\n\t\t}\n\t\treturn node;\n\t}\n\n\n\tresizeAndDraw = () => {\n\t\tthis.setCanvasSize();\n\t\tthis.drawField();\n\t}\n\n\tsetColorCell = () => {\n\t\tthis.colorCell = getComputedStyle(document.documentElement).getPropertyValue('--color');\n\t}\n\n\tsetColorCellAndDraw = () => {\n\t\tthis.setColorCell();\n\t\tthis.drawField();\n\t}\n\n\tsetCanvasSize = () => {\n\t\tconst width = this.nodes.wrapperCanvasNode.offsetWidth;\n\t\tconst height = this.nodes.wrapperCanvasNode.offsetHeight;\n\n\t\tconst aspectRatio = this.cols / this.rows;\n\n\t\tconst canvasWidth = Math.min(width, height * aspectRatio);\n\t\tconst canvasHeight = canvasWidth / aspectRatio;\n\n\t\tthis.cellSize = canvasWidth / this.cols;\n\n\t\tconst xPadding = (width - canvasWidth) / 2;\n\t\tconst yPadding = (height - canvasHeight) / 2;\n\n\t\tthis.nodes.canvasNode.width = canvasWidth;\n\t\tthis.nodes.canvasNode.height = canvasHeight;\n\n\t\tthis.nodes.wrapperCanvasNode.style.padding = `${yPadding}px ${xPadding}px`;\n\t}\n\n\tgetKey(row, col) {\n\t\treturn `${row}-${col}`;\n\t}\n\n\tdrawField() {\n\t\tthis.load();\n\n\t\tthis.ctx.clearRect(0, 0, this.nodes.canvasNode.width, this.nodes.canvasNode.height);\n\t\tconst cellSize = this.cellSize;\n\n\t\tthis.ctx.fillStyle = this.colorCell;\n\n\t\tfor (let i = 0; i < this.rows; i++) {\n\t\t\tfor (let j = 0; j < this.cols; j++) {\n\t\t\t\tconst key = this.getKey(i, j);\n\t\t\t\tif (this.field.get(key)) {\n\t\t\t\t\tthis.ctx.fillRect(j * cellSize, i * cellSize, cellSize, cellSize);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.loadComplete();\n\t}\n\n\tsendWorkerUpdateField() {\n\t\tthis.load();\n\n\t\tthis.worker.postMessage({\n\t\t\ttype: 'updateField',\n\t\t\tpayload: {}\n\t\t});\n\n\t\tconst resultWorker = new Promise((resolve, reject) => {\n\t\t\tthis.worker.onmessage = (event) => {\n\t\t\t\tconst message = event.data;\n\n\t\t\t\tthis.loadComplete();\n\n\t\t\t\tif (message.type === 'result: updateField') {\n\t\t\t\t\tconst data = message.data;\n\t\t\t\t\tconst { activeCells, field, buffer } = data;\n\n\t\t\t\t\tthis.activeCells = activeCells;\n\t\t\t\t\tthis.field = field;\n\t\t\t\t\tthis.buffer = buffer;\n\n\t\t\t\t\tresolve(data);\n\t\t\t\t}\n\n\t\t\t\treject(false);\n\t\t\t};\n\t\t});\n\n\t\treturn resultWorker;\n\t}\n\n\trenderPopup() {\n\t\tthis.renderPopulation();\n\t\tthis.renderRandom();\n\t\tthis.nodes.popupCyclesNode.textContent = String(this.cycles);\n\t\tthis.nodes.popupRandomCheckboxNode.checked = this.random;\n\t}\n\n\trenderTime() {\n\t\tlet gameTime = Date.now() - this.gameStartTime + this.gameLastTime;\n\t\tif (this.gameStartTime === 0) gameTime = 0;\n\t\tthis.gameTime = gameTime;\n\n\t\tthis.nodes.popupTimeNode.textContent = (this.gameTime / 1000).toFixed(1);\n\t}\n\n\trenderRandom() {\n\t\tif (this.random === true) {\n\t\t\tthis.nodes.popupGenerateNode.classList.add('popup__generate_active');\n\t\t} else {\n\t\t\tthis.nodes.popupGenerateNode.classList.remove('popup__generate_active');\n\t\t}\n\t}\n\n\trenderPopulation() {\n\t\tthis.nodes.popupPopulationNode.textContent = String(this.activeCells);\n\t}\n\n\tstepGame = () => {\n\t\tif (this.loading === true) return;\n\n\t\treturn this.sendWorkerUpdateField()\n\t\t.then(data => {\n\t\t\tthis.drawField();\n\t\t\tthis.cycles = this.cycles + 1;\n\t\t\tthis.renderPopup();\n\t\t\treturn data;\n\t\t});\n\t}\n\n\tstartGame() {\n\t\tthis.disableInputs();\n\t\tthis.played = true;\n\t\tthis.gameStartTime = Date.now();\n\t\tthis.animationObj = requestInterval(this.stepGame, this.interval / this.speed ** 1.5);\n\t\tthis.animationTimeId = requestInterval(this.stepAnimationRenderTime);\n\t}\n\n\tstepAnimationRenderTime = () => {\n\t\tthis.renderTime();\n\t}\n\n\tstopGame() {\n\t\tif (this.played === false) return;\n\t\tthis.played = false;\n\t\tthis.gameLastTime = this.gameTime;\n\t\tcancelAnimationFrame(this.animationObj.id);\n\t\tcancelAnimationFrame(this.animationTimeId.id);\n\t\tthis.enableInputs();\n\t}\n\n\tgetLocalStorage() {\n\t\treturn JSON.parse(localStorage.getItem('life') || '{}');\n\t}\n\n\tsetLocalStorage(key, value) {\n\t\tconst lastLocalStorage = this.getLocalStorage();\n\n\t\tlastLocalStorage[key] = value;\n\n\t\tlocalStorage.setItem('life', JSON.stringify(lastLocalStorage));\n\t}\n\n}\n\n\n"],"names":["$c1f387b1016b83f1$export$281c8d11e819ea94","fn","interval","obj","id","start","Date","now","animate","requestAnimationFrame","delta","$da0a748be2ea26f3$export$7913c0f032ea53bb","input","min","max","value","parseInt","isNaN","toString","$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","pairs","keys","Object","i","length","resolved","Error","parcelRequire","register","JSON","parse","$56b621a6dd25b2cb$exports","workerUrl","origin","isESM","self","location","source","stringify","URL","createObjectURL","Blob","type","$08028844b0fea909$var$url","resolve","import","meta","url","$08028844b0fea909$exports","$54810fc92916998b$var$injectedNode","document","querySelector","ctx","rows","cols","cellSize","field","buffer","colorCell","animationObj","nodes","cycles","played","gameTime","gameStartTime","gameLastTime","random","speed","activeCells","localStorageUse","isDragging","isRealDragging","animationTimeId","worker","Worker","loading","focusedInput","popupHidden","constructor","injectedNode","cellsCountX","cellsCountY","this","initNodes","canvasNode","getContext","useLocalStorage","initCalcSpeed","setCanvasSize","setColorCell","initInputNodes","initPopupHidden","sendWorkerInitFields","then","initEventListeners","drawField","renderPopup","popupInputRowsNode","String","popupInputColsNode","togglePopup","disableInputs","disabled","enableInputs","focus","load","postMessage","payload","Promise","reject","onmessage","event","message","data","loadComplete","popupLoadNode","classList","add","popupNode","remove","window","addEventListener","resizeAndDraw","matchMedia","setColorCellAndDraw","popupPauseNode","stopGame","popupPlayNode","startGame","popupGenerateNode","generateNewFields","button","generateCellByClick","isClickOnElement","popupRandomCheckboxNode","setLocalStorage","renderRandom","popupSpeedRangeNode","calcSpeedInputChange","popupClearNode","clear","popupStepNode","stepGame","newRows","resizeFieldRows","newCols","resizeFieldCols","popupCloseNode","textContent","sendWorkerResizeField","renderTime","catch","element","currentNode","target","parentElement","sendWorkerDeleteOrCreateCell","typeAction","key","moved","rect","getBoundingClientRect","x","clientX","left","y","clientY","top","col","Math","floor","row","getKey","isCellAlive","get","createCell","set","deleteCell","renderPopulation","Number","popupSpeedInfoNode","lastGameState","currentVal","valueAsNumber","newSpeed","toFixed","lastLocalStorage","getLocalStorage","undefined","innerHTML","_querySelector","wrapperCanvasNode","popupTimeNode","popupPopulationNode","popupCyclesNode","parentNode","selector","node","getComputedStyle","documentElement","getPropertyValue","width","offsetWidth","height","offsetHeight","aspectRatio","canvasWidth","canvasHeight","xPadding","yPadding","style","padding","clearRect","fillStyle","j","fillRect","sendWorkerUpdateField","checked","stepAnimationRenderTime","cancelAnimationFrame","localStorage","getItem","setItem"],"version":3,"file":"index.5ccccf17.js.map"}