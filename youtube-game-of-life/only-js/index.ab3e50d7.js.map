{"mappings":"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","sources":["youtube-game-of-life/only-js/scripts/functions/request-interval.js","youtube-game-of-life/only-js/scripts/functions/restrict-input.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-3f478013e046a8b7.js","node_modules/@parcel/runtime-js/lib/helpers/get-worker-url.js","node_modules/@parcel/runtime-js/lib/runtime-694e44035c7a1ebe.js","youtube-game-of-life/only-js/scripts/index.js","youtube-game-of-life/only-js/scripts/game-of-life.js"],"sourcesContent":["export function requestInterval(fn, interval = 0) {\n  const obj = {\n    id: 0,\n  };\n  let start = Date.now();\n\n  const animate = () => {\n\t\tif (interval === 0) {\n\t\t\tfn();\n\t\t\tobj.id = requestAnimationFrame(animate);\n\t\t\treturn;\n\t\t}\n\n\n    const now = Date.now();\n    const delta = now - start;\n\n    if (delta >= interval) {\n      fn();\n      start = now - (delta % interval);\n    }\n\n    obj.id = requestAnimationFrame(animate);\n  };\n\n  obj.id = requestAnimationFrame(animate);\n\n  return obj;\n}\n","export function restrictInputValue(input, min, max) {\n\tlet value = parseInt(input.value);\n\n\tif (isNaN(value)) {\n\t\tvalue = min;\n\t} else if (value < min) {\n\t\tvalue = min;\n\t} else if (value > max) {\n\t\tvalue = max;\n\t}\n\n\tinput.value = value.toString();\n\n\treturn value;\n}\n","\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"4j3bX\\\":\\\"index.ab3e50d7.js\\\",\\\"h7bGy\\\":\\\"worker-game-of-life-logic.ea43ae75.js\\\"}\"));","\"use strict\";\n\nmodule.exports = function (workerUrl, origin, isESM) {\n  if (origin === self.location.origin) {\n    // If the worker bundle's url is on the same origin as the document,\n    // use the worker bundle's own url.\n    return workerUrl;\n  } else {\n    // Otherwise, create a blob URL which loads the worker bundle with `importScripts`.\n    var source = isESM ? 'import ' + JSON.stringify(workerUrl) + ';' : 'importScripts(' + JSON.stringify(workerUrl) + ');';\n    return URL.createObjectURL(new Blob([source], {\n      type: 'application/javascript'\n    }));\n  }\n};","let workerURL = require('./helpers/get-worker-url');\nlet url = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"h7bGy\"));\nmodule.exports = workerURL(url.toString(), url.origin, true);","import { GameOfLife } from \"./game-of-life\";\n\nconst canvasNode = document.querySelector('.canvas');\nconst popupNode = document.querySelector('.popup');\n\nif (canvasNode === null || popupNode === null) {\n\tthrow new Error('canvas не найден');\n}\n\nconst game = new GameOfLife({\n\tcanvasNode: canvasNode,\n\tcellsCountX: 100,\n\tcellsCountY: 100,\n\tpopupNode: popupNode,\n\trandom: false,\n\tspeed: 1,\n\tlocalStorageUse: true,\n\tpopupHidden: false\n});\n\n","import { requestInterval } from \"./functions/request-interval\";\nimport { restrictInputValue } from \"./functions/restrict-input\";\n\nexport class GameOfLife {\n\tctx;\n\trows;\n\tcols;\n\tcellSize;\n\tfield;\n\tbuffer;\n\tcolorCell;\n\tanimationObj;\n\tnodes;\n\tcycles = 0;\n\tplayed = false;\n\tinterval = 500;\n\tgameTime = 0;\n\tgameStartTime = 0;\n\tgameLastTime = 0;\n\trandom = false;\n\tspeed = 0;\n\tactiveCells = 0;\n\tlocalStorageUse = false;\n\tisDragging = false;\n\tisRealDragging = false;\n\tanimationTimeId;\n\tworker = new Worker(new URL('workers/worker-game-of-life-logic.js', import.meta.url));\n\tloading = false;\n\tfocusedInput = null;\n\tpopupHidden = false;\n\n\tconstructor({ canvasNode, popupNode, cellsCountX, cellsCountY, random, speed, localStorageUse, popupHidden }) {\n\t\tif (speed < 1) {\n\t\t\tthrow new Error('GameOfLife: speed не может быть меньше 1');\n\t\t}\n\t\tif (speed > 10) {\n\t\t\tthrow new Error('GameOfLife: speed не может быть больше 10');\n\t\t}\n\n\t\tthis.ctx = canvasNode.getContext(\"2d\");\n\t\tthis.rows = cellsCountX;\n\t\tthis.cols = cellsCountY;\n\t\tthis.random = random;\n\t\tthis.speed = speed;\n\t\tthis.localStorageUse = localStorageUse;\n\t\tthis.popupHidden = popupHidden;\n\n\t\tthis.initNodes(canvasNode, popupNode);\n\t\tif (this.localStorageUse) this.useLocalStorage();\n\t\tthis.initCalcSpeed();\n\t\tthis.setCanvasSize();\n\t\tthis.setColorCell();\n\t\tthis.initInputNodes();\n\t\tthis.initPopupHidden();\n\n\t\tthis.sendWorkerInitFields({\n\t\t\trandom: this.random,\n\t\t\trows: this.rows,\n\t\t\tcols: this.cols\n\t\t})\n\t\t.then(({ activeCells, field, buffer }) => {\n\t\t\tthis.initEventListeners();\n\t\t\tthis.drawField();\n\t\t\tthis.renderPopup();\n\t\t});\n\t}\n\n\tinitInputNodes() {\n\t\tthis.nodes.popupInputRowsNode.value = String(this.rows);\n\t\tthis.nodes.popupInputColsNode.value = String(this.cols);\n\t}\n\n\tinitPopupHidden() {\n\t\tthis.togglePopup(this.popupHidden);\n\t}\n\n\tdisableInputs() {\n\t\tthis.nodes.popupInputRowsNode.disabled = true;\n\t\tthis.nodes.popupInputColsNode.disabled = true;\n\t}\n\n\tenableInputs() {\n\t\tthis.nodes.popupInputRowsNode.disabled = false;\n\t\tthis.nodes.popupInputColsNode.disabled = false;\n\n\t\tif (this.focusedInput !== null) {\n\t\t\tthis.focusedInput.focus();\n\t\t\tthis.focusedInput = null;\n\t\t}\n\t}\n\n\tsendWorkerInitFields({\n\t\trandom, rows, cols\n\t}) {\n\n\t\tthis.load();\n\t\tthis.disableInputs();\n\n\t\tthis.worker.postMessage({\n\t\t\ttype: 'initFields',\n\t\t\tpayload: {\n\t\t\t\trandom: random,\n\t\t\t\trows: rows,\n\t\t\t\tcols: cols\n\t\t\t}\n\t\t});\n\n\t\tconst resultWorker = new Promise((resolve, reject) => {\n\t\t\tthis.worker.onmessage = (event) => {\n\t\t\t\tconst message = event.data;\n\n\t\t\t\tthis.loadComplete();\n\t\t\t\tthis.enableInputs();\n\n\t\t\t\tif (message.type === 'result: initFields') {\n\t\t\t\t\tconst data = message.data;\n\t\t\t\t\tconst { activeCells, field, buffer } = data;\n\n\t\t\t\t\tthis.activeCells = activeCells;\n\t\t\t\t\tthis.field = field;\n\t\t\t\t\tthis.buffer = buffer;\n\n\t\t\t\t\tresolve(data);\n\t\t\t\t}\n\n\t\t\t\treject(false);\n\t\t\t};\n\t\t});\n\n\t\treturn resultWorker;\n\t}\n\n\tload() {\n\t\tthis.loading = true;\n\t\tthis.nodes.popupLoadNode.classList.add('popup__load_active');\n\t\tthis.nodes.popupNode.classList.add('popup_load');\n\t}\n\n\tloadComplete() {\n\t\tthis.loading = false;\n\t\tthis.nodes.popupLoadNode.classList.remove('popup__load_active');\n\t\tthis.nodes.popupNode.classList.remove('popup_load');\n\t}\n\n\tinitEventListeners() {\n\t\twindow.addEventListener('resize', this.resizeAndDraw);\n\t\tconst matchMediaDark = window.matchMedia('(prefers-color-scheme: dark)');\n\n\t\tmatchMediaDark.addEventListener('change', this.setColorCellAndDraw);\n\n\t\tthis.nodes.popupPauseNode.addEventListener('click', () => {\n\t\t\tif (this.played === false) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.stopGame();\n\t\t});\n\n\t\tthis.nodes.popupPlayNode.addEventListener('click', () => {\n\t\t\tif (this.played === true) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.startGame();\n\t\t});\n\n\t\tthis.nodes.popupGenerateNode.addEventListener('click', this.generateNewFields);\n\n\t\tthis.nodes.canvasNode.addEventListener('pointerdown', (event) => {\n\t\t\tif (this.loading === true) return;\n\t\t\tif (event.button === 2 || event.button === 1) return false; // Если это правая или средняя кнопка мыши, это не тот клик\n\t\t\tthis.isDragging = true;\n\t\t\tthis.isRealDragging = false;\n\t\t});\n\n\t\tthis.nodes.canvasNode.addEventListener('pointermove', (event) => {\n\t\t\tif (event.button === 2 || event.button === 1) return false; // Если это правая или средняя кнопка мыши, это не тот клик\n\t\t\tif (this.isDragging === true && this.loading === false) {\n\t\t\t\tthis.isRealDragging = true;\n\t\t\t\tthis.generateCellByClick(event, true)\n\t\t\t};\n\t\t});\n\n\t\tdocument.addEventListener('pointerup', (event) => {\n\t\t\tif (event.button === 2 || event.button === 1) return false; // Если это правая или средняя кнопка мыши, это не тот клик\n\t\t\tconst clickOnPopupBool = this.isClickOnElement(event, this.nodes.popupNode);\n\t\t\tif (clickOnPopupBool === true) return;\n\t\t\tif (this.isRealDragging === false && this.loading === false) this.generateCellByClick(event, false);\n\n\t\t\tthis.isDragging = false;\n\t\t\tthis.isRealDragging = false;\n\t\t});\n\n\t\tthis.nodes.popupRandomCheckboxNode.addEventListener('input', () => {\n\t\t\tthis.random = !this.random;\n\t\t\tif (this.localStorageUse) this.setLocalStorage('random', this.random);\n\t\t\tthis.renderRandom();\n\t\t});\n\n\t\tthis.nodes.popupSpeedRangeNode.addEventListener('input', this.calcSpeedInputChange);\n\t\tthis.nodes.popupClearNode.addEventListener('click', this.clear);\n\n\t\tthis.nodes.popupStepNode.addEventListener('click', () => {\n\t\t\tthis.disableInputs();\n\t\t\tthis.stepGame()?.then(data => {\n\t\t\t\tthis.enableInputs();\n\t\t\t});\n\t\t});\n\n\t\tthis.nodes.popupInputRowsNode.addEventListener('input', () => {\n\t\t\tconst newRows = restrictInputValue(this.nodes.popupInputRowsNode, 0, 2000);\n\t\t\tif (this.localStorageUse) this.setLocalStorage('rows', newRows);\n\n\t\t\tthis.focusedInput = this.nodes.popupInputRowsNode;\n\t\t\tthis.resizeFieldRows(newRows);\n\t\t});\n\n\t\tthis.nodes.popupInputColsNode.addEventListener('input', () => {\n\t\t\tconst newCols = restrictInputValue(this.nodes.popupInputColsNode, 0, 2000);\n\t\t\tif (this.localStorageUse) this.setLocalStorage('cols', newCols);\n\n\t\t\tthis.focusedInput = this.nodes.popupInputColsNode;\n\t\t\tthis.resizeFieldCols(newCols);\n\t\t});\n\n\t\tthis.nodes.popupCloseNode.addEventListener('click', () => {\n\t\t\tthis.popupHidden = !this.popupHidden;\n\t\t\tthis.togglePopup(this.popupHidden);\n\t\t});\n\t}\n\n\ttogglePopup = (popupHidden) => {\n\t\tif (this.localStorageUse === true) this.setLocalStorage('popupHidden', this.popupHidden);\n\n\t\tif (this.popupHidden === true) {\n\t\t\tthis.nodes.popupNode.classList.add('popup_hidden');\n\t\t\tthis.nodes.popupCloseNode.textContent = 'Открыть';\n\t\t} else {\n\t\t\tthis.nodes.popupNode.classList.remove('popup_hidden');\n\t\t\tthis.nodes.popupCloseNode.textContent = 'Скрыть';\n\t\t}\n\t}\n\n\tresizeFieldRows(newRows) {\n\t\tif (this.loading === true) return;\n\n\t\tthis.sendWorkerResizeField(newRows, this.cols, this.random)\n\t\t.then((data) => {\n\t\t\tthis.setCanvasSize();\n\t\t\tthis.drawField();\n\t\t\tthis.renderTime();\n\t\t\tthis.renderPopup();\n\t\t});\n\t}\n\n\tresizeFieldCols(newCols) {\n\t\tif (this.loading === true) return;\n\n\t\tthis.sendWorkerResizeField(this.rows, newCols, this.random)\n\t\t.then((data) => {\n\t\t\tthis.setCanvasSize();\n\t\t\tthis.drawField();\n\t\t\tthis.renderTime();\n\t\t\tthis.renderPopup();\n\t\t});\n\t}\n\n\tsendWorkerResizeField(newRows, newCols, random) {\n\t\tthis.load();\n\t\tthis.disableInputs();\n\n\t\tthis.worker.postMessage({\n\t\t\ttype: 'resizeField',\n\t\t\tpayload: {\n\t\t\t\tnewRows: newRows,\n\t\t\t\tnewCols: newCols,\n\t\t\t\trandom: random\n\t\t\t}\n\t\t});\n\n\t\tconst resultWorker = new Promise((resolve, reject) => {\n\t\t\tthis.worker.onmessage = (event) => {\n\t\t\t\tconst message = event.data;\n\n\t\t\t\tthis.loadComplete();\n\t\t\t\tthis.enableInputs();\n\n\n\t\t\t\tif (message.type === 'result: resizeField') {\n\t\t\t\t\tconst data = message.data;\n\t\t\t\t\tconst { field, buffer, activeCells, rows, cols } = data;\n\n\t\t\t\t\tthis.field = field;\n\t\t\t\t\tthis.buffer = buffer;\n\t\t\t\t\tthis.activeCells = activeCells;\n\t\t\t\t\tthis.rows = rows;\n\t\t\t\t\tthis.cols = cols;\n\n\t\t\t\t\tresolve(data);\n\t\t\t\t}\n\n\t\t\t\treject(false);\n\t\t\t};\n\t\t}).catch(() => {});\n\n\t\treturn resultWorker;\n\t}\n\n\tisClickOnElement(event, element) {\n\t\tconst target = event.target; // Получаем целевой элемент клика\n\n\t\t// Проверяем, является ли целевой элемент или его родительские элементы равным заданному элементу\n\t\tlet currentNode = target;\n\t\twhile (currentNode != null) {\n\t\t\tif (currentNode === element) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tcurrentNode = currentNode.parentElement;\n\t\t}\n\n\t\t// Если не было найдено совпадений, возвращаем false\n\t\treturn false;\n\t}\n\n\tsendWorkerDeleteOrCreateCell(typeAction, key) {\n\t\tthis.load();\n\n\t\tthis.worker.postMessage({\n\t\t\ttype: 'deleteOrCreateCell',\n\t\t\tpayload: {\n\t\t\t\ttypeAction: typeAction,\n\t\t\t\tkey: key\n\t\t\t}\n\t\t});\n\n\t\tconst resultWorker = new Promise((resolve, reject) => {\n\t\t\tthis.worker.onmessage = (event) => {\n\t\t\t\tconst message = event.data;\n\n\t\t\t\tthis.loadComplete();\n\n\t\t\t\tif (message.type === 'result: deleteOrCreateCell') {\n\t\t\t\t\tconst data = message.data;\n\t\t\t\t\tresolve(data);\n\t\t\t\t}\n\n\t\t\t\treject(false);\n\t\t\t};\n\t\t});\n\n\t\treturn resultWorker;\n\t}\n\n\tgenerateCellByClick = (event, moved = false) => {\n\t\tif (this.played === true) {\n\t\t\treturn;\n\t\t}\n\t\tconst rect = this.nodes.canvasNode.getBoundingClientRect();\n\t\tconst x = event.clientX - rect.left;\n\t\tconst y = event.clientY - rect.top;\n\t\tconst col = Math.floor(x / this.cellSize);\n\t\tconst row = Math.floor(y / this.cellSize);\n\t\tconst key = this.getKey(row, col);\n\n\t\tconst isCellAlive = this.field.get(key);\n\n\t\tconst deleteCell = () => {\n\t\t\tthis.activeCells--;\n\t\t\tthis.field.set(key, false);\n\t\t\tthis.sendWorkerDeleteOrCreateCell('delete', key).then();\n\t\t};\n\n\t\tconst createCell = () => {\n\t\t\tthis.activeCells++;\n\t\t\tthis.field.set(key, true);\n\t\t\tthis.sendWorkerDeleteOrCreateCell('create', key).then();\n\t\t}\n\n\t\tif (isCellAlive === false && moved === true) {\n\t\t\tcreateCell();\n\t\t} else if (isCellAlive === false && moved === false) {\n\t\t\tcreateCell();\n\t\t} else if (isCellAlive === true && moved === false) {\n\t\t\tdeleteCell();\n\t\t}\n\n\t\tthis.renderPopulation();\n\t\tthis.drawField();\n\t}\n\n\tinitCalcSpeed() {\n\t\tconst max = Number(this.nodes.popupSpeedRangeNode.max);\n\t\tconst min = Number(this.nodes.popupSpeedRangeNode.min);\n\n\t\tconst speedPercent = (this.speed - 1) / 9;\n\t\tconst value = min + (speedPercent * (max - min));\n\n\t\tthis.nodes.popupSpeedRangeNode.value = String(value);\n\t\tthis.nodes.popupSpeedInfoNode.textContent = String(this.speed);\n\t}\n\n\tcalcSpeedInputChange = () => {\n\t\tconst lastGameState = this.played;\n\t\tthis.stopGame();\n\n\t\tconst currentVal = this.nodes.popupSpeedRangeNode.valueAsNumber;\n\t\tconst max = Number(this.nodes.popupSpeedRangeNode.max);\n\t\tconst min = Number(this.nodes.popupSpeedRangeNode.min);\n\n\t\tconst end = max - min;\n\t\tconst currentValMod = currentVal - min;\n\n\t\tconst currentValPercent = currentValMod / end;\n\t\tconst newSpeed = Number(((currentValPercent * 9) + 1).toFixed(1));\n\t\tthis.speed = newSpeed;\n\n\t\tthis.nodes.popupSpeedInfoNode.textContent = String(this.speed);\n\n\t\tif (this.localStorageUse) this.setLocalStorage('speed', this.speed);\n\n\t\tif (lastGameState === true) this.startGame();\n\t}\n\n\tuseLocalStorage() {\n\t\tconst lastLocalStorage = this.getLocalStorage();\n\n\t\tif (lastLocalStorage.random !== undefined) {\n\t\t\tthis.random = lastLocalStorage.random;\n\t\t}\n\n\t\tif (lastLocalStorage.speed !== undefined) {\n\t\t\tthis.speed = lastLocalStorage.speed;\n\t\t}\n\n\t\tif (lastLocalStorage.rows !== undefined) {\n\t\t\tthis.rows = lastLocalStorage.rows;\n\t\t}\n\n\t\tif (lastLocalStorage.cols !== undefined) {\n\t\t\tthis.cols = lastLocalStorage.cols;\n\t\t}\n\n\t\tif (lastLocalStorage.popupHidden !== undefined) {\n\t\t\tthis.popupHidden = lastLocalStorage.popupHidden;\n\t\t}\n\t}\n\n\tclear = () => {\n\t\tif (this.loading === true) false;\n\n\t\tthis.stopGame();\n\t\tthis.gameTime = 0;\n\t\tthis.gameLastTime = 0;\n\t\tthis.gameStartTime = 0;\n\t\tthis.cycles = 0;\n\n\t\tthis.disableInputs();\n\n\t\tthis.sendWorkerInitFields({\n\t\t\trandom: false,\n\t\t\trows: this.rows,\n\t\t\tcols: this.cols\n\t\t}).then(data => {\n\t\t\tthis.drawField();\n\t\t\tthis.renderTime();\n\t\t\tthis.renderPopup();\n\t\t\tthis.enableInputs();\n\t\t});\n\t}\n\n\tgenerateNewFields = () => {\n\t\tif (this.loading === true) false;\n\n\t\tthis.sendWorkerInitFields({\n\t\t\trandom: true,\n\t\t\trows: this.rows,\n\t\t\tcols: this.cols\n\t\t}).then(data => {\n\t\t\tthis.cycles = 0;\n\t\t\tthis.drawField();\n\t\t\tthis.renderPopup();\n\t\t});\n\t}\n\n\tinitNodes(canvasNode, popupNode) {\n\t\tconst popupPlayNode = this._querySelector(popupNode, '.popup__play');\n\t\tconst popupPauseNode = this._querySelector(popupNode, '.popup__pause');\n\t\tconst popupTimeNode = this._querySelector(popupNode, '.popup__time');\n\t\tconst popupPopulationNode = this._querySelector(popupNode, '.popup__population');\n\t\tconst popupCyclesNode = this._querySelector(popupNode, '.popup__cycles');\n\t\tconst popupGenerateNode = this._querySelector(popupNode, '.popup__generate');\n\t\tconst wrapperCanvasNode = this._querySelector(document, '.wrapper-canvas');\n\t\tconst popupRandomCheckboxNode = this._querySelector(popupNode, '.popup__random-checkbox');\n\t\tconst popupSpeedRangeNode = this._querySelector(popupNode, '.popup__speed-range');\n\t\tconst popupSpeedInfoNode = this._querySelector(popupNode, '.popup__speed-info');\n\t\tconst popupClearNode = this._querySelector(popupNode, '.popup__clear');\n\t\tconst popupStepNode = this._querySelector(popupNode, '.popup__step');\n\t\tconst popupLoadNode = this._querySelector(popupNode, '.popup__load');\n\t\tconst popupInputRowsNode = this._querySelector(popupNode, '.popup__rows');\n\t\tconst popupInputColsNode = this._querySelector(popupNode, '.popup__cols');\n\t\tconst popupCloseNode = this._querySelector(popupNode, '.popup__close');\n\n\t\tthis.nodes = {\n\t\t\tcanvasNode: canvasNode,\n\t\t\tpopupNode: popupNode,\n\t\t\tpopupPlayNode: popupPlayNode,\n\t\t\tpopupPauseNode: popupPauseNode,\n\t\t\tpopupTimeNode: popupTimeNode,\n\t\t\tpopupPopulationNode: popupPopulationNode,\n\t\t\tpopupCyclesNode: popupCyclesNode,\n\t\t\tpopupGenerateNode: popupGenerateNode,\n\t\t\twrapperCanvasNode: wrapperCanvasNode,\n\t\t\tpopupRandomCheckboxNode: popupRandomCheckboxNode,\n\t\t\tpopupSpeedRangeNode: popupSpeedRangeNode,\n\t\t\tpopupSpeedInfoNode: popupSpeedInfoNode,\n\t\t\tpopupClearNode: popupClearNode,\n\t\t\tpopupStepNode: popupStepNode,\n\t\t\tpopupLoadNode: popupLoadNode,\n\t\t\tpopupInputRowsNode: popupInputRowsNode,\n\t\t\tpopupInputColsNode: popupInputColsNode,\n\t\t\tpopupCloseNode: popupCloseNode\n\t\t}\n\t}\n\n\t_querySelector(parentNode, selector) {\n\t\tconst node = parentNode.querySelector(selector);\n\t\tif (node === null) {\n\t\t\tthrow new Error(`GameOfLife: элемент с классом ${selector} не найден`);\n\t\t}\n\t\treturn node;\n\t}\n\n\n\tresizeAndDraw = () => {\n\t\tthis.setCanvasSize();\n\t\tthis.drawField();\n\t}\n\n\tsetColorCell = () => {\n\t\tthis.colorCell = getComputedStyle(document.documentElement).getPropertyValue('--color');\n\t}\n\n\tsetColorCellAndDraw = () => {\n\t\tthis.setColorCell();\n\t\tthis.drawField();\n\t}\n\n\tsetCanvasSize = () => {\n\t\tconst width = this.nodes.wrapperCanvasNode.offsetWidth;\n\t\tconst height = this.nodes.wrapperCanvasNode.offsetHeight;\n\n\t\tconst aspectRatio = this.cols / this.rows;\n\n\t\tconst canvasWidth = Math.min(width, height * aspectRatio);\n\t\tconst canvasHeight = canvasWidth / aspectRatio;\n\n\t\tthis.cellSize = canvasWidth / this.cols;\n\n\t\tconst xPadding = (width - canvasWidth) / 2;\n\t\tconst yPadding = (height - canvasHeight) / 2;\n\n\t\tthis.nodes.canvasNode.width = canvasWidth;\n\t\tthis.nodes.canvasNode.height = canvasHeight;\n\n\t\tthis.nodes.wrapperCanvasNode.style.padding = `${yPadding}px ${xPadding}px`;\n\t}\n\n\tgetKey(row, col) {\n\t\treturn `${row}-${col}`;\n\t}\n\n\tdrawField() {\n\t\tthis.load();\n\n\t\tthis.ctx.clearRect(0, 0, this.nodes.canvasNode.width, this.nodes.canvasNode.height);\n\t\tconst cellSize = this.cellSize;\n\n\t\tthis.ctx.fillStyle = this.colorCell;\n\n\t\tfor (let i = 0; i < this.rows; i++) {\n\t\t\tfor (let j = 0; j < this.cols; j++) {\n\t\t\t\tconst key = this.getKey(i, j);\n\t\t\t\tif (this.field.get(key)) {\n\t\t\t\t\tthis.ctx.fillRect(j * cellSize, i * cellSize, cellSize, cellSize);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.loadComplete();\n\t}\n\n\tsendWorkerUpdateField() {\n\t\tthis.load();\n\n\t\tthis.worker.postMessage({\n\t\t\ttype: 'updateField',\n\t\t\tpayload: {}\n\t\t});\n\n\t\tconst resultWorker = new Promise((resolve, reject) => {\n\t\t\tthis.worker.onmessage = (event) => {\n\t\t\t\tconst message = event.data;\n\n\t\t\t\tthis.loadComplete();\n\n\t\t\t\tif (message.type === 'result: updateField') {\n\t\t\t\t\tconst data = message.data;\n\t\t\t\t\tconst { activeCells, field, buffer } = data;\n\n\t\t\t\t\tthis.activeCells = activeCells;\n\t\t\t\t\tthis.field = field;\n\t\t\t\t\tthis.buffer = buffer;\n\n\t\t\t\t\tresolve(data);\n\t\t\t\t}\n\n\t\t\t\treject(false);\n\t\t\t};\n\t\t});\n\n\t\treturn resultWorker;\n\t}\n\n\trenderPopup() {\n\t\tthis.renderPopulation();\n\t\tthis.renderRandom();\n\t\tthis.nodes.popupCyclesNode.textContent = String(this.cycles);\n\t\tthis.nodes.popupRandomCheckboxNode.checked = this.random;\n\t}\n\n\trenderTime() {\n\t\tlet gameTime = Date.now() - this.gameStartTime + this.gameLastTime;\n\t\tif (this.gameStartTime === 0) gameTime = 0;\n\t\tthis.gameTime = gameTime;\n\n\t\tthis.nodes.popupTimeNode.textContent = (this.gameTime / 1000).toFixed(1);\n\t}\n\n\trenderRandom() {\n\t\tif (this.random === true) {\n\t\t\tthis.nodes.popupGenerateNode.classList.add('popup__generate_active');\n\t\t} else {\n\t\t\tthis.nodes.popupGenerateNode.classList.remove('popup__generate_active');\n\t\t}\n\t}\n\n\trenderPopulation() {\n\t\tthis.nodes.popupPopulationNode.textContent = String(this.activeCells);\n\t}\n\n\tstepGame = () => {\n\t\tif (this.loading === true) return;\n\n\t\treturn this.sendWorkerUpdateField()\n\t\t.then(data => {\n\t\t\tthis.drawField();\n\t\t\tthis.cycles = this.cycles + 1;\n\t\t\tthis.renderPopup();\n\t\t\treturn data;\n\t\t});\n\t}\n\n\tstartGame() {\n\t\tthis.disableInputs();\n\t\tthis.played = true;\n\t\tthis.gameStartTime = Date.now();\n\t\tthis.animationObj = requestInterval(this.stepGame, this.interval / this.speed ** 1.5);\n\t\tthis.animationTimeId = requestInterval(this.stepAnimationRenderTime);\n\t}\n\n\tstepAnimationRenderTime = () => {\n\t\tthis.renderTime();\n\t}\n\n\tstopGame() {\n\t\tif (this.played === false) return;\n\t\tthis.played = false;\n\t\tthis.gameLastTime = this.gameTime;\n\t\tcancelAnimationFrame(this.animationObj.id);\n\t\tcancelAnimationFrame(this.animationTimeId.id);\n\t\tthis.enableInputs();\n\t}\n\n\tgetLocalStorage() {\n\t\treturn JSON.parse(localStorage.getItem('life') || '{}');\n\t}\n\n\tsetLocalStorage(key, value) {\n\t\tconst lastLocalStorage = this.getLocalStorage();\n\n\t\tlastLocalStorage[key] = value;\n\n\t\tlocalStorage.setItem('life', JSON.stringify(lastLocalStorage));\n\t}\n\n}\n\n\n"],"names":["$c1f387b1016b83f1$export$281c8d11e819ea94","fn","interval","obj","id","start","Date","now","animate","requestAnimationFrame","delta","$da0a748be2ea26f3$export$7913c0f032ea53bb","input","min","max","value","parseInt","isNaN","toString","$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","pairs","keys","Object","i","length","resolved","Error","parcelRequire","register","JSON","parse","$56b621a6dd25b2cb$exports","workerUrl","origin","isESM","self","location","source","stringify","URL","createObjectURL","Blob","type","$08028844b0fea909$var$url","resolve","import","meta","url","$08028844b0fea909$exports","$54810fc92916998b$var$canvasNode","document","querySelector","$54810fc92916998b$var$popupNode","ctx","rows","cols","cellSize","field","buffer","colorCell","animationObj","nodes","cycles","played","gameTime","gameStartTime","gameLastTime","random","speed","activeCells","localStorageUse","isDragging","isRealDragging","animationTimeId","worker","Worker","loading","focusedInput","popupHidden","constructor","canvasNode","popupNode","cellsCountX","cellsCountY","this","getContext","initNodes","useLocalStorage","initCalcSpeed","setCanvasSize","setColorCell","initInputNodes","initPopupHidden","sendWorkerInitFields","then","initEventListeners","drawField","renderPopup","popupInputRowsNode","String","popupInputColsNode","togglePopup","disableInputs","disabled","enableInputs","focus","load","postMessage","payload","Promise","reject","onmessage","event","message","data","loadComplete","popupLoadNode","classList","add","remove","window","addEventListener","resizeAndDraw","matchMedia","setColorCellAndDraw","popupPauseNode","stopGame","popupPlayNode","startGame","popupGenerateNode","generateNewFields","button","generateCellByClick","isClickOnElement","popupRandomCheckboxNode","setLocalStorage","renderRandom","popupSpeedRangeNode","calcSpeedInputChange","popupClearNode","clear","popupStepNode","stepGame","newRows","resizeFieldRows","newCols","resizeFieldCols","popupCloseNode","textContent","sendWorkerResizeField","renderTime","catch","element","currentNode","target","parentElement","sendWorkerDeleteOrCreateCell","typeAction","key","moved","rect","getBoundingClientRect","x","clientX","left","y","clientY","top","col","Math","floor","row","getKey","isCellAlive","get","createCell","set","deleteCell","renderPopulation","Number","popupSpeedInfoNode","lastGameState","currentVal","valueAsNumber","newSpeed","toFixed","lastLocalStorage","getLocalStorage","undefined","_querySelector","popupTimeNode","popupPopulationNode","popupCyclesNode","wrapperCanvasNode","parentNode","selector","node","getComputedStyle","documentElement","getPropertyValue","width","offsetWidth","height","offsetHeight","aspectRatio","canvasWidth","canvasHeight","xPadding","yPadding","style","padding","clearRect","fillStyle","j","fillRect","sendWorkerUpdateField","checked","stepAnimationRenderTime","cancelAnimationFrame","localStorage","getItem","setItem"],"version":3,"file":"index.ab3e50d7.js.map"}